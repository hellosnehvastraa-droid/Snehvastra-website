<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Collection — Snehvastra Echo Drops</title>
  <meta name="description" content="Limited streetwear drops. AI styling. NFC authenticated. Shop curated pieces."/>
  <meta name="theme-color" content="#3A0F5A"/>

  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Clash+Display:wght@500;600;700&family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet"/>
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet"/>
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

  <style>
    :root{--plum:#3A0F5A;--plum-2:#2a0a3f;--slate:#1F2024;--muted:#8E8F92;--glass:rgba(255,255,255,0.85);--radius:20px;--shadow-soft:0 25px 80px rgba(58,15,90,0.08);--ease:0.32s;--max-w:1400px;}
    *{box-sizing:border-box;}
    body{margin:0;font-family:'Poppins',sans-serif;background:linear-gradient(180deg,#faf9fc,#f5f3f8);color:var(--slate);overflow-x:hidden;}

    /* Enhanced Topbar (from index.html sync) */
    .topbar{position:sticky;top:0;z-index:140;background:rgba(255,255,255,0.95);backdrop-filter:blur(20px);border-bottom:1px solid rgba(58,15,90,0.08);padding:16px 5%;display:flex;align-items:center;justify-content:space-between;}
    .brand{display:flex;gap:12px;align-items:center;}
    .logo{height:48px;border-radius:12px;box-shadow:0 12px 40px rgba(58,15,90,0.12);}
    nav ul{display:flex;gap:12px;list-style:none;margin:0;padding:0;}
    nav a{padding:10px 16px;border-radius:14px;font-weight:600;color:var(--muted);text-decoration:none;transition:all var(--ease);}
    nav a.active,nav a:hover{background:rgba(58,15,90,0.08);color:var(--plum);}

    /* Hero with Parallax */
    .main-hero{max-width:var(--max-w);margin:60px auto 40px;padding:0 5%;position:relative;}
    .hero-bg{position:absolute;top:-20%;left:0;right:0;height:120%;background:linear-gradient(135deg,rgba(58,15,90,0.03),transparent);z-index:-1;}
    .page-title{font-family:'Clash Display',serif;font-size:clamp(2.8rem,7vw,4.5rem);color:var(--plum);margin:0 0 20px;background:linear-gradient(135deg,var(--plum),#5a1f7a);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;}
    .hero-stats{display:flex;gap:40px;font-size:1.1rem;font-weight:700;}
    .stat{color:var(--plum);}

    /* Advanced Controls */
    .controls{max-width:var(--max-w);margin:0 auto 40px;padding:0 5%;display:grid;grid-template-columns:1fr auto;gap:24px;align-items:center;}
    .filter-tags{display:flex;flex-wrap:wrap;gap:12px;}
    .tag-chip{padding:12px 20px;border-radius:50px;background:rgba(255,255,255,0.7);backdrop-filter:blur(10px);border:1px solid rgba(58,15,90,0.1);font-weight:700;cursor:pointer;transition:all var(--ease);}
    .tag-chip:hover,.tag-chip.active{transform:translateY(-2px);box-shadow:0 15px 40px rgba(58,15,90,0.15);background:var(--plum);color:#fff;}
    .ai-search{display:flex;gap:16px;align-items:center;max-width:500px;}
    .ai-search input{padding:16px 24px;border-radius:50px;border:1px solid rgba(58,15,90,0.15);font-size:1rem;flex:1;background:rgba(255,255,255,0.9);}
    .ai-btn{padding:16px 28px;border-radius:50px;background:linear-gradient(135deg,var(--plum),var(--plum-2));color:#fff;border:none;font-weight:700;cursor:pointer;box-shadow:0 12px 40px rgba(58,15,90,0.3);}

    /* Masonry Grid */
    .masonry-grid{max-width:var(--max-w);margin:0 auto 100px;padding:0 5%;column-count:1;column-gap:24px;}
    @media(min-width:768px){.masonry-grid{column-count:2;}}
    @media(min-width:1200px){.masonry-grid{column-count:3;}}
    .product-card{background:#fff;margin-bottom:24px;border-radius:24px;overflow:hidden;box-shadow:var(--shadow-soft);transition:all var(--ease);break-inside:avoid;}
    .product-card:hover{transform:translateY(-12px) scale(1.02);box-shadow:0 40px 120px rgba(58,15,90,0.2);}
    .card-media{position:relative;height:280px;overflow:hidden;}
    .card-media img{width:100%;height:100%;object-fit:cover;transition:all var(--ease);}
    .card-media video{display:none;position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;}
    .product-card:hover .card-media video{display:block;}
    .product-card:hover .card-media img{transform:scale(1.1);}
    .nfc-badge{position:absolute;top:20px;right:20px;background:#fff;border-radius:20px;padding:8px 16px;font-size:0.85rem;font-weight:700;box-shadow:0 8px 24px rgba(0,0,0,0.15);}
    .card-content{padding:28px;}
    .card-title{font-family:'Clash Display',serif;font-size:1.4rem;color:var(--plum);margin:0 0 8px;font-weight:600;}
    .card-price{font-size:1.3rem;font-weight:900;color:var(--plum);margin:0 0 16px;}
    .card-tags{display:flex;gap:8px;margin-bottom:20px;flex-wrap:wrap;}
    .tag{background:rgba(58,15,90,0.08);color:var(--plum);padding:6px 12px;border-radius:20px;font-size:0.85rem;font-weight:600;}
    .card-actions{display:flex;gap:12px;align-items:center;}
    .wishlist-heart{position:relative;cursor:pointer;}
    .heart-fill{display:none;width:24px;height:24px;background:var(--plum);clip-path:polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%);}
    .wishlist-heart.active .heart-fill{display:block;}
    .add-btn{flex:1;padding:14px 24px;border-radius:16px;background:linear-gradient(135deg,var(--plum),var(--plum-2));color:#fff;border:none;font-weight:700;cursor:pointer;box-shadow:0 12px 36px rgba(58,15,90,0.3);transition:all var(--ease);}
    .add-btn:hover{transform:translateY(-3px);box-shadow:0 20px 50px rgba(58,15,90,0.4);}

    /* Infinite Scroll Loader */
    .loader{display:flex;justify-content:center;padding:60px;}
    .spinner{width:40px;height:40px;border:3px solid rgba(58,15,90,0.1);border-top-color:var(--plum);border-radius:50%;animation:spin 1s linear infinite;}

    /* AI Panel & Toast (enhanced) */
    .ai-panel{position:fixed;top:100px;right:20px;max-width:380px;background:#fff;border-radius:24px;padding:28px;box-shadow:0 40px 120px rgba(58,15,90,0.15);display:none;z-index:200;}
    #toast{position:fixed;top:24px;right:24px;background:linear-gradient(135deg,var(--plum),var(--plum-2));color:#fff;padding:16px 24px;border-radius:16px;box-shadow:0 20px 60px rgba(58,15,90,0.4);display:none;z-index:300;font-weight:700;}

    @keyframes spin{to{transform:rotate(360deg);}}
    @media(max-width:980px){.masonry-grid{column-count:1;padding:0 5%;}.controls{grid-template-columns:1fr;}}
  </style>
</head>
<body>
  <!-- Enhanced Topbar (sync with index.html) -->
  <div class="topbar">
    <div class="brand">
      <img src="images/logo.final.png" class="logo" alt="Snehvastra"/>
      <div>
        <div style="font-family:'Clash Display',serif;font-size:1.1rem;color:var(--plum);">Snehvastra</div>
        <div style="font-size:0.8rem;color:var(--muted);">Echo Drops</div>
      </div>
    </div>
    <nav>
      <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="collection.html" class="active">Collection</a></li>
        <li><a href="auction.html">Auction</a></li>
        <li><a href="wishlist.html">Wishlist</a></li>
        <li><a href="cart.html">Cart (<span id="cartCount">0</span>)</a></li>
      </ul>
    </nav>
  </div>

  <!-- Hero -->
  <section class="main-hero">
    <div class="hero-bg"></div>
    <h1 class="page-title" data-aos="fade-up">Echo Drops</h1>
    <div class="hero-stats" data-aos="fade-up" data-aos-delay="200">
      <div class="stat">12+ Limited Pieces</div>
      <div class="stat">NFC Authenticated</div>
      <div class="stat">AI Styling</div>
    </div>
  </section>

  <!-- Controls -->
  <section class="controls">
    <div class="filter-tags">
      <button class="tag-chip active" data-filter="all">All Drops</button>
      <button class="tag-chip" data-filter="street">Street</button>
      <button class="tag-chip" data-filter="luxury">Luxury</button>
      <button class="tag-chip" data-filter="limited">Limited</button>
    </div>
    <div class="ai-search">
      <input id="aiSearch" placeholder="Ask Sneh: 'streetwear under 20k for Diwali'"/>
      <button class="ai-btn" onclick="askAI()">Ask Sneh</button>
    </div>
  </section>

  <!-- AI Panel -->
  <div id="aiPanel" class="ai-panel"></div>

  <!-- Masonry Grid -->
  <section class="masonry-grid" id="productsGrid"></section>
  <div class="loader" id="loader" style="display:none;">
    <div class="spinner"></div>
  </div>

  <!-- Toast -->
  <div id="toast"></div>

  <script>
    // Expanded Products (12+ items)
    const PRODUCTS = [
      {id:'1',name:'Eclipse Hoodie',price:12999,category:'Street',tags:['hoodie','black','oversized'],image:'images/products/eclipse-hoodie.jpg',video:'videos/eclipse.mp4',status:'limited'},
      {id:'2',name:'Neon Track Pants',price:8999,category:'Street',tags:['pants','neon','tech'],image:'images/products/track-pants.jpg',video:'videos/track.mp4'},
      {id:'3',name:'Midnight Varsity',price:24999,category:'Luxury',tags:['jacket','varsity','black'],image:'images/products/varsity.jpg'},
      // Add 9+ more products with images/videos...
      {id:'12',name:'Snehvastra ONE',price:999999,category:'Auction',tags:['one-of-one','nfc'],image:'images/products/one.jpg',status:'auction'}
    ];

    let visibleProducts = 0;
    let filteredProducts = [...PRODUCTS];
    let cart = JSON.parse(localStorage.getItem('snehvastra_cart') || '{}');

    // Render masonry cards
    function renderProducts(products = filteredProducts.slice(0, visibleProducts + 6)) {
      const grid = document.getElementById('productsGrid');
      products.slice(visibleProducts).forEach(p => {
        const card = document.createElement('article');
        card.className = 'product-card';
        card.innerHTML = `
          <div class="card-media">
            <img src="${p.image}" alt="${p.name}" loading="lazy"/>
            ${p.video ? `<video muted loop preload="none"><source src="${p.video}" type="video/mp4"/></video>` : ''}
            ${p.status === 'limited' ? '<div class="nfc-badge">NFC Verified</div>' : ''}
          </div>
          <div class="card-content">
            <h3 class="card-title">${p.name}</h3>
            <div class="card-price">₹${p.price.toLocaleString()}</div>
            <div class="card-tags">${p.tags.map(t => `<span class="tag">${t}</span>`).join('')}</div>
            <div class="card-actions">
              <div class="wishlist-heart" data-id="${p.id}" title="Add to Wishlist"> 
                <div class="heart-fill"></div>
              </div>
              <button class="add-btn" data-id="${p.id}">Add to Cart</button>
            </div>
          </div>`;
        grid.appendChild(card);
        gsap.from(card, {opacity:0, y:50, duration:0.8, stagger:0.1});
        visibleProducts++;
      });
    }

    // Infinite scroll
    let loading = false;
    window.addEventListener('scroll', () => {
      if (window.innerHeight + window.scrollY >= document.body.offsetHeight - 1000 && !loading && visibleProducts < filteredProducts.length) {
        loading = true;
        document.getElementById('loader').style.display = 'flex';
        setTimeout(() => {
          renderProducts();
          document.getElementById('loader').style.display = 'none';
          loading = false;
        }, 800);
      }
    });

    // Enhanced AI Search (semantic)
    function askAI() {
      const query = document.getElementById('aiSearch').value.toLowerCase();
      const panel = document.getElementById('aiPanel');
      
      // Advanced matching
      filteredProducts = PRODUCTS.filter(p => {
        const tagsMatch = p.tags.some(t => query.includes(t));
        const priceMatch = query.includes('under') && p.price < 20000;
        const occasionMatch = query.includes('diwali') || query.includes('party');
        return tagsMatch || priceMatch || occasionMatch;
      });
      
      panel.innerHTML = `<h4 style="color:var(--plum);margin:0 0 16px;">Sneh found ${filteredProducts.length} matches</h4><div style="color:var(--muted);line-height:1.7;">${query ? `Perfect for "${query}"` : 'Browse all drops'}</div>`;
      panel.style.display = 'block';
      visibleProducts = 0;
      document.getElementById('productsGrid').innerHTML = '';
      renderProducts();
      window.scrollTo({top: 0, behavior: 'smooth'});
    }

    // Event listeners (cart, wishlist, filters)
    document.addEventListener('click', e => {
      if (e.target.matches('.add-btn')) {
        const id = e.target.dataset.id;
        cart[id] = (cart[id] || 0) + 1;
        localStorage.setItem('snehvastra_cart', JSON.stringify(cart));
        updateCartCount();
        showToast('Added to cart!');
      }
      if (e.target.matches('.tag-chip')) {
        document.querySelectorAll('.tag-chip').forEach(c => c.classList.remove('active'));
        e.target.classList.add('active');
        // Filter logic here
        askAI(); // Trigger AI refresh
      }
    });

    function updateCartCount() {
      const total = Object.values(cart).reduce((a,b)=>a+b,0);
      document.getElementById('cartCount').textContent = total;
    }

    function showToast(msg) {
      const toast = document.getElementById('toast');
      toast.textContent = msg;
      toast.style.display = 'block';
      setTimeout(() => toast.style.display = 'none', 3000);
    }

    // Init
    AOS.init({duration: 1000, once: true});
    renderProducts();
    updateCartCount();
  </script>
</body>
</html>
