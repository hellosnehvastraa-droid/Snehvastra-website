<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <meta name="theme-color" content="#3A0F5A"/>
  <title>Collector Dashboard ‚Äî Snehvastra</title>
  <meta name="description" content="Live order tracking, auction wins, Suratgarh 2-day delivery, reorder instant, lifetime collector metrics."/>

  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Clash+Display:wght@500;600;700&family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet"/>
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet"/>
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

  <style>
    :root{
      --purple:#3A0F5A; --purple-dark:#2e0b4a; --success:#10B981; --warning:#F59E0B; --info:#06B6D4;
      --slate:#1F2024; --slate-mid:#3B3D45; --muted:#8E8F92; --glass:rgba(255,255,255,0.95);
      --radius:28px; --shadow-soft:0 40px 120px rgba(58,15,90,0.15); --ease:0.4s cubic-bezier(0.25,0.46,0.45,0.94);
      --max-width:1400px;
    }
    *{box-sizing:border-box;}
    body{margin:0;font-family:'Poppins',sans-serif;background:linear-gradient(135deg,#f8f7fc 0%,#f4f2f9 100%);color:var(--slate);overflow-x:hidden;}

    /* Perfect System Header */
    header{position:sticky;top:0;z-index:140;background:rgba(255,255,255,0.98);backdrop-filter:blur(24px);border-bottom:1px solid rgba(58,15,90,0.08);padding:20px 5%;display:flex;align-items:center;justify-content:space-between;}
    .brand{display:flex;gap:14px;align-items:center;cursor:pointer;}
    .logo{height:52px;border-radius:16px;box-shadow:0 16px 48px rgba(58,15,90,0.18);}
    nav ul{display:flex;gap:16px;list-style:none;margin:0;padding:0;}
    nav a{padding:14px 24px;border-radius:20px;font-weight:600;color:var(--muted);text-decoration:none;transition:all var(--ease);}
    nav a.active{background:rgba(58,15,90,0.08);color:var(--purple);}

    /* Enhanced Auction Banner */
    .auction-banner{position:fixed;top:88px;left:50%;transform:translateX(-50%);width:92%;max-width:520px;background:linear-gradient(135deg,var(--purple),var(--purple-dark));color:#fff;padding:20px;border-radius:20px;text-align:center;font-weight:700;box-shadow:0 20px 60px rgba(58,15,90,0.4);z-index:100;}
    .auction-timer{background:rgba(255,255,255,0.95);backdrop-filter:blur(20px);padding:8px 16px;border-radius:16px;color:var(--slate);font-weight:700;font-size:1.1rem;margin-left:12px;animation:pulse 2s infinite;}

    /* Dashboard Hero */
    .dashboard-hero{max-width:var(--max-width);margin:160px auto 80px;padding:0 5%;display:grid;grid-template-columns:280px 1fr;gap:60px;align-items:start;}
    @media(max-width:1100px){.dashboard-hero{grid-template-columns:1fr;gap:48px;}}

    .profile-card{background:#fff;border-radius:var(--radius);padding:64px 48px;text-align:center;box-shadow:var(--shadow-soft);border:1px solid rgba(58,15,90,0.08);}
    .profile-avatar{width:160px;height:160px;border-radius:50%;background:linear-gradient(135deg,var(--purple),var(--purple-dark));margin:0 auto 32px;display:flex;align-items:center;justify-content:center;font-size:4rem;color:#fff;box-shadow:0 20px 60px rgba(58,15,90,0.3);}
    .collector-title{font-family:'Clash Display',serif;font-size:2.4rem;color:var(--purple);margin:0 0 12px;font-weight:900;}
    .member-badge{display:inline-flex;align-items:center;gap:12px;background:linear-gradient(135deg,var(--success),#059669);color:#fff;padding:16px 28px;border-radius:32px;font-weight:700;font-size:1.1rem;}
    .lifetime-value{font-family:'Clash Display',serif;font-size:2.8rem;font-weight:900;background:linear-gradient(135deg,var(--purple),var(--purple-dark));-webkit-background-clip:text;-webkit-text-fill-color:transparent;margin:32px 0 0;}

    .metrics-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:32px;margin-top:48px;}
    .metric-card{background:#fff;border-radius:var(--radius);padding:48px 32px;text-align:center;box-shadow:var(--shadow-soft);border:1px solid rgba(58,15,90,0.08);transition:all var(--ease);}
    .metric-card:hover{transform:translateY(-8px);}
    .metric-value{font-family:'Clash Display',serif;font-size:3.2rem;font-weight:900;color:var(--purple);margin:0 0 12px;}
    .metric-label{font-size:1.1rem;color:var(--slate-mid);font-weight:700;}

    /* Controls */
    .controls{display:flex;gap:24px;margin:80px 0 40px;flex-wrap:wrap;align-items:center;}
    .control-input,.control-select{padding:20px 28px;border:3px solid rgba(58,15,90,0.15);border-radius:24px;font-size:1.1rem;background:#fff;min-width:280px;font-weight:600;}
    .control-input:focus,.control-select:focus{outline:none;border-color:var(--purple);box-shadow:0 0 0 4px rgba(58,15,90,0.1);}

    /* Orders Table */
    .orders-section{max-width:var(--max-width);margin:0 auto 100px;padding:0 5%;}
    .orders-card{background:#fff;border-radius:var(--radius);padding:80px 64px;box-shadow:var(--shadow-soft);border:1px solid rgba(58,15,90,0.08);overflow:hidden;}
    .orders-table{width:100%;border-collapse:collapse;}
    .orders-table th{font-family:'Clash Display',serif;font-size:1rem;color:var(--slate-mid);padding:32px 24px 20px;text-transform:uppercase;letter-spacing:1px;font-weight:700;}
    .orders-table td{padding:32px 24px;border-top:1px solid rgba(58,15,90,0.08);vertical-align:middle;}
    .orders-table tr:hover{background:rgba(58,15,90,0.02);}

    .status-badge{padding:16px 28px;border-radius:32px;font-family:'Clash Display',serif;font-weight:900;font-size:1rem;display:inline-flex;align-items:center;gap:8px;}
    .status-completed{background:linear-gradient(135deg,var(--success),#059669);color:#fff;}
    .status-shipped{background:linear-gradient(135deg,var(--info),#0891B2);color:#fff;}
    .status-processing{background:linear-gradient(135deg,var(--warning),#D97706);color:#fff;}
    .status-auction{background:linear-gradient(135deg,var(--purple),var(--purple-dark));color:#fff;}

    .order-id{font-family:'Clash Display',serif;font-size:1.3rem;font-weight:900;color:var(--purple);}
    .order-total{font-family:'Clash Display',serif;font-size:1.6rem;font-weight:900;color:var(--purple);}
    .action-buttons{display:flex;gap:16px;}
    .action-btn{padding:16px 32px;border-radius:24px;font-family:'Clash Display',serif;font-weight:900;font-size:1.1rem;cursor:pointer;transition:all var(--ease);border:none;display:flex;align-items:center;gap:12px;}
    .btn-details{background:linear-gradient(135deg,var(--purple),var(--purple-dark));color:#fff;box-shadow:0 12px 40px rgba(58,15,90,0.3);}
    .btn-reorder{background:#fff;color:var(--purple);border:3px solid rgba(58,15,90,0.2);box-shadow:0 12px 40px rgba(58,15,90,0.15);}
    .action-btn:hover{transform:translateY(-4px);box-shadow:0 20px 60px rgba(58,15,90,0.4);}

    .empty-state{text-align:center;padding:120px 80px;color:var(--slate-mid);}
    .empty-state h3{font-family:'Clash Display',serif;font-size:3rem;color:var(--slate);margin:0 0 24px;}
    .empty-state .btn-primary{padding:24px 56px;border-radius:32px;background:linear-gradient(135deg,var(--purple),var(--purple-dark));color:#fff;font-family:'Clash Display',serif;font-weight:900;font-size:1.3rem;cursor:pointer;border:none;box-shadow:0 24px 80px rgba(58,15,90,0.4);transition:all var(--ease);}

    footer{padding:100px 5% 60px;text-align:center;color:var(--muted);border-top:1px solid rgba(183,185,189,0.12);font-size:0.95rem;}
    #toast{position:fixed;top:32px;right:32px;background:linear-gradient(135deg,var(--purple),var(--purple-dark));color:#fff;padding:24px 36px;border-radius:24px;box-shadow:0 28px 90px rgba(58,15,90,0.45);transform:translateX(500px);transition:all var(--ease);font-weight:700;z-index:500;max-width:420px;}
    #toast.show{transform:translateX(0);}

    @keyframes pulse{0%,100%{opacity:1;}50%{opacity:0.7;}}
  </style>
</head>
<body>
  <!-- Perfect System Header -->
  <header>
    <div class="brand" onclick="location.href='index.html'">
      <img src="images/logo.final.png" class="logo" alt="Snehvastra"/>
      <div>
        <div style="font-family:'Clash Display',serif;font-size:1.2rem;color:var(--purple);">Snehvastra</div>
        <div style="font-size:0.85rem;color:var(--muted);">Collector Dashboard</div>
      </div>
    </div>
    <nav>
      <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="collection.html">Collection</a></li>
        <li><a href="auction.html">Auction</a></li>
        <li><a href="order-history.html" class="active">Orders</a></li>
        <li><a href="cart.html">Cart (<span id="cartCount">0</span>)</a></li>
        <li id="authArea"></li>
      </ul>
    </nav>
  </header>

  <div class="auction-banner">
    üî• SNEHVASTRA ONE AUCTION <span class="auction-timer" id="auctionTimer">Loading...</span>
  </div>

  <main class="dashboard-hero">
    <!-- Profile Card -->
    <div class="profile-card" data-aos="fade-right">
      <div class="profile-avatar">üëë</div>
      <h2 class="collector-title" id="collectorName">Premium Collector</h2>
      <div class="member-badge">
        Member since 2025 ‚Ä¢ Suratgarh Elite
      </div>
      <div class="lifetime-value" id="lifetimeValue">‚Çπ1,45,000</div>
    </div>

    <!-- Metrics Grid -->
    <div data-aos="fade-left">
      <h1 style="font-family:'Clash Display',serif;font-size:3.8rem;color:var(--purple);margin:0 0 48px;font-weight:900;">Order Dashboard</h1>
      <div class="metrics-grid">
        <div class="metric-card">
          <div class="metric-value" id="totalOrders">12</div>
          <div class="metric-label">Total Orders</div>
        </div>
        <div class="metric-card">
          <div class="metric-value" id="totalPieces">28</div>
          <div class="metric-label">Pieces Owned</div>
        </div>
        <div class="metric-card">
          <div class="metric-value" id="auctionWins">3</div>
          <div class="metric-label">Auction Wins</div>
        </div>
        <div class="metric-card">
          <div class="metric-value" id="suratgarhDelvs">100%</div>
          <div class="metric-label">Suratgarh ETA</div>
        </div>
      </div>
    </div>
  </main>

  <div class="controls">
    <input class="control-input" id="searchInput" placeholder="üîç Search by Order ID, Product, or Tracking..."/>
    <select class="control-select" id="filterSelect">
      <option value="all">All Orders</option>
      <option value="processing">Processing</option>
      <option value="shipped">Shipped</option>
      <option value="completed">Delivered</option>
      <option value="auction">Auction Wins</option>
    </select>
  </div>

  <section class="orders-section">
    <div class="orders-card" id="ordersContainer">
      <!-- Dynamic orders table -->
    </div>
  </section>

  <footer>
    ¬© <span id="year"></span> Snehvastra. Collector dashboard v2.5 ‚Ä¢ Updated Dec 23, 2025.
  </footer>

  <div id="toast"></div>

  <script>
    // Perfect system sync
    const USER_KEY = "snehvastra_user"; const CART_KEY = "snehvastra_cart"; const ORDERS_KEY = "snehvastra_orders";
    let cart = JSON.parse(localStorage.getItem(CART_KEY) || "{}");
    let user = JSON.parse(localStorage.getItem(USER_KEY) || "{}");

    const SAMPLE_ORDERS = [
      {id:"SNV-1001", date:"2025-12-15", items:[{name:"Signature Tee Matte Black", qty:2, price:4999}], total:9998, status:"completed", tracking:"DTDC-ET123456789", type:"standard"},
      {id:"SNV-1002", date:"2025-12-18", items:[{name:"Cloud Hoodie Indigo", qty:1, price:19999}], total:19999, status:"shipped", tracking:"SNV-TRK-789", type:"standard"},
      {id:"SNV-AUC-001", date:"2025-12-20", items:[{name:"Snehvastra ONE 1/1 Auction", qty:1, price:125000}], total:125000, status:"auction", tracking:null, type:"auction"}
    ];

    function money(n){return "‚Çπ" + Math.round(Number(n)).toLocaleString("en-IN");}

    function renderAuth(){
      const authArea = document.getElementById("authArea");
      if(user && user.loggedIn){
        authArea.innerHTML = `<span style="color:var(--purple);font-weight:700;">Hi, ${user.name}</span>`;
        document.getElementById("collectorName").textContent = user.name || "Elite Collector";
      } else {
        authArea.innerHTML = `<a href="user-login.html" style="padding:12px 24px;">Login</a>`;
      }
    }

    function updateCartCount(){
      const total = Object.values(cart).reduce((sum,qty)=>sum + (qty||0),0);
      document.getElementById("cartCount").textContent = total;
    }

    function showToast(msg){
      const toast = document.getElementById("toast");
      toast.textContent = msg;
      toast.classList.add("show");
      setTimeout(()=>toast.classList.remove("show"), 3200);
    }

    function renderOrders(){
      const search = document.getElementById("searchInput").value.toLowerCase();
      const filter = document.getElementById("filterSelect").value;
      
      const filtered = SAMPLE_ORDERS.filter(order => {
        if(filter !== "all" && order.status !== filter) return false;
        return order.id.toLowerCase().includes(search) || 
               order.items.some(i => i.name.toLowerCase().includes(search));
      });

      if(filtered.length === 0){
        document.getElementById("ordersContainer").innerHTML = `
          <div class="empty-state">
            <h3>No Orders Found</h3>
            <p>Try different search terms or filters. Start with our exclusive collection.</p>
            <button class="btn-primary" onclick="location.href='collection.html'">Explore Collection</button>
          </div>
        `;
        return;
      }

      let html = `
        <table class="orders-table">
          <thead>
            <tr>
              <th>Order ID</th>
              <th>Date</th>
              <th>Items</th>
              <th>Total</th>
              <th>Status</th>
              <th>Suratgarh ETA</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
      `;

      filtered.forEach(order => {
        const itemCount = order.items.reduce((sum,i)=>sum+i.qty,0);
        const eta = order.status === "completed" ? "Delivered" : 
                   order.status === "shipped" ? "2 days" : "Processing";
        html += `
          <tr>
            <td><span class="order-id">${order.id}</span></td>
            <td>${new Date(order.date).toLocaleDateString("en-IN")}</td>
            <td>${itemCount} pcs</td>
            <td><span class="order-total">${money(order.total)}</span></td>
            <td><span class="status-badge status-${order.status}">
              ${order.status === "auction" ? "üèÜ WIN" : order.status.toUpperCase()}
            </span></td>
            <td>${eta}</td>
            <td>
              <div class="action-buttons">
                <button class="action-btn btn-details" onclick="viewOrder('${order.id}')">Details</button>
                <button class="action-btn btn-reorder" onclick="reorder('${order.id}')">Reorder</button>
              </div>
            </td>
          </tr>
        `;
      });

      html += `</tbody></table>`;
      document.getElementById("ordersContainer").innerHTML = html;
    }

    function viewOrder(id){
      const order = SAMPLE_ORDERS.find(o => o.id === id);
      showToast(`üìã Viewing ${order.id} details - Suratgarh tracking active`);
    }

    function reorder(id){
      const order = SAMPLE_ORDERS.find(o => o.id === id);
      order.items.forEach(item => {
        const key = item.name.toLowerCase().replace(/[^a-z0-9]/g,'-');
        cart[key] = (cart[key] || 0) + item.qty;
      });
      localStorage.setItem(CART_KEY, JSON.stringify(cart));
      updateCartCount();
      showToast(`‚úÖ ${order.items.length} items reordered to cart!`);
      setTimeout(()=>location.href='cart.html', 1200);
    }

    // Event listeners
    document.getElementById("searchInput").addEventListener("input", renderOrders);
    document.getElementById("filterSelect").addEventListener("change", renderOrders);

    // Auction timer
    const auctionDate = new Date("2025-12-24T18:00:00").getTime();
    setInterval(()=>{
      const diff = auctionDate - Date.now();
      const timer = document.getElementById("auctionTimer");
      if(diff > 0){
        const days = Math.floor(diff / (1000*60*60*24));
        const hours = Math.floor((diff % (1000*60*60*24)) / (1000*60*60));
        timer.textContent = `${days}d ${hours}h`;
      } else {
        timer.textContent = "LIVE NOW!";
      }
    }, 60000);

    // Init
    AOS.init({duration: 1200, once: true});
    renderAuth();
    updateCartCount();
    renderOrders();
    document.getElementById("year").textContent = new Date().getFullYear();
  </script>
</body>
</html>
