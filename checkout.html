<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <meta name="theme-color" content="#3A0F5A"/>
  <title>Checkout â€” Snehvastra</title>
  <meta name="description" content="Suratgarh 2-day delivery, NFC verified checkout, Razorpay/COD/UPI, live pincode calculator, collector priority."/>

  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Clash+Display:wght@500;600;700&family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet"/>
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet"/>
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  <script src="https://checkout.razorpay.com/v1/checkout.js" defer></script>

  <style>
    :root{
      --purple:#3A0F5A; --purple-dark:#2e0b4a; --success:#10B981; --gold:#F59E0B;
      --slate:#1F2024; --slate-mid:#3B3D45; --muted:#8E8F92; --glass:rgba(255,255,255,0.95);
      --radius:28px; --shadow-soft:0 40px 120px rgba(58,15,90,0.15); --ease:0.4s cubic-bezier(0.25,0.46,0.45,0.94);
      --max-width:1400px;
    }
    *{box-sizing:border-box;}
    body{margin:0;font-family:'Poppins',sans-serif;background:linear-gradient(135deg,#f8f7fc 0%,#f4f2f9 100%);color:var(--slate);overflow-x:hidden;}

    /* Perfect System Header */
    header{position:sticky;top:0;z-index:140;background:rgba(255,255,255,0.98);backdrop-filter:blur(24px);border-bottom:1px solid rgba(58,15,90,0.08);padding:20px 5%;display:flex;align-items:center;justify-content:space-between;}
    .brand{display:flex;gap:14px;align-items:center;cursor:pointer;}
    .logo{height:52px;border-radius:16px;box-shadow:0 16px 48px rgba(58,15,90,0.18);}
    nav ul{display:flex;gap:16px;list-style:none;margin:0;padding:0;}
    nav a{padding:14px 24px;border-radius:20px;font-weight:600;color:var(--muted);text-decoration:none;transition:all var(--ease);}
    nav a.active{background:rgba(58,15,90,0.08);color:var(--purple);}

    /* Enhanced Auction Banner */
    .auction-banner{position:fixed;top:88px;left:50%;transform:translateX(-50%);width:92%;max-width:520px;background:linear-gradient(135deg,var(--purple),var(--purple-dark));color:#fff;padding:20px;border-radius:20px;text-align:center;font-weight:700;box-shadow:0 20px 60px rgba(58,15,90,0.4);z-index:100;}
    .auction-timer{background:rgba(255,255,255,0.95);backdrop-filter:blur(20px);padding:8px 16px;border-radius:16px;color:var(--slate);font-weight:700;font-size:1.1rem;margin-left:12px;animation:pulse 2s infinite;}

    /* Hero */
    .hero{max-width:var(--max-width);margin:140px auto 80px;padding:0 5%;text-align:center;background:#fff;border-radius:var(--radius);padding:80px;box-shadow:var(--shadow-soft);border:1px solid rgba(58,15,90,0.08);}
    .hero-title{font-family:'Clash Display',serif;font-size:clamp(4rem,10vw,6rem);background:linear-gradient(135deg,var(--purple),var(--purple-dark));-webkit-background-clip:text;-webkit-text-fill-color:transparent;margin:0 0 24px;}
    .hero-subtitle{font-size:1.4rem;color:var(--slate-mid);max-width:700px;margin:0 auto;line-height:1.8;}
    .security-badges{display:flex;justify-content:center;gap:24px;margin-top:48px;flex-wrap:wrap;}
    .badge{background:var(--glass);padding:16px 28px;border-radius:24px;font-weight:700;color:var(--purple);backdrop-filter:blur(20px);border:1px solid rgba(58,15,90,0.1);}

    /* Checkout Grid */
    .checkout-grid{max-width:var(--max-width);margin:0 auto 120px;padding:0 5%;display:grid;grid-template-columns:1fr 480px;gap:80px;align-items:start;}
    @media(max-width:1200px){.checkout-grid{grid-template-columns:1fr;gap:60px;}}

    /* Shipping Form */
    .shipping-form{background:#fff;border-radius:var(--radius);padding:80px;box-shadow:var(--shadow-soft);border:1px solid rgba(58,15,90,0.08);}
    .form-title{font-family:'Clash Display',serif;font-size:2.8rem;color:var(--purple);margin:0 0 48px;text-align:center;font-weight:900;}
    .form-grid{display:grid;grid-template-columns:1fr 1fr;gap:32px;margin-bottom:32px;}
    .form-group:last-child{grid-column:1/-1;}
    .form-label{display:block;font-weight:700;font-size:1.1rem;color:var(--slate);margin-bottom:12px;}
    .form-input,.form-select,.form-textarea{width:100%;padding:24px;border:2px solid rgba(58,15,90,0.15);border-radius:20px;font-size:1.1rem;font-weight:500;background:var(--glass);backdrop-filter:blur(16px);transition:all var(--ease);}
    .form-input:focus,.form-select:focus,.form-textarea:focus{outline:none;border-color:var(--purple);box-shadow:0 0 0 4px rgba(58,15,90,0.1);}
    .form-textarea{min-height:140px;resize:vertical;}
    
    .pincode-row{display:flex;gap:20px;align-items:end;}
    .pincode-info{font-size:1.1rem;color:var(--success);font-weight:700;margin-top:12px;}
    .delivery-eta{background:var(--success);color:#fff;padding:12px 24px;border-radius:20px;font-weight:700;display:inline-block;}

    /* Payment Options */
    .payment-section{margin:48px 0;padding:40px;background:linear-gradient(135deg,rgba(58,15,90,0.02),rgba(58,15,90,0.01));border-radius:24px;border:2px solid rgba(58,15,90,0.1);}
    .payment-title{font-family:'Clash Display',serif;font-size:1.8rem;color:var(--purple);margin:0 0 32px;font-weight:900;}
    .payment-options{display:grid;grid-template-columns:repeat(auto-fit,minmax(320px,1fr));gap:24px;}
    .payment-option{padding:32px;border:2px solid rgba(58,15,90,0.15);border-radius:24px;cursor:pointer;transition:all var(--ease);background:#fff;position:relative;overflow:hidden;}
    .payment-option:hover{transform:translateY(-4px);box-shadow:0 20px 60px rgba(58,15,90,0.2);}
    .payment-option.active{border-color:var(--purple);background:linear-gradient(135deg,rgba(58,15,90,0.08),rgba(58,15,90,0.04));}
    .payment-icon{font-size:3.2rem;margin-bottom:24px;}
    .payment-title{font-family:'Clash Display',serif;font-size:1.4rem;font-weight:900;color:var(--purple);margin:0 0 12px;}
    .payment-desc{font-size:1.1rem;color:var(--slate-mid);margin:0 0 24px;line-height:1.6;}
    .payment-radio{position:absolute;top:24px;right:24px;width:24px;height:24px;border:3px solid var(--purple);border-radius:50%;background:#fff;}
    .payment-radio.checked{background:var(--purple);}

    /* Order Summary */
    .order-summary{position:sticky;top:160px;background:#fff;border-radius:var(--radius);padding:64px;box-shadow:var(--shadow-soft);border:1px solid rgba(58,15,90,0.08);}
    .summary-title{font-family:'Clash Display',serif;font-size:2rem;color:var(--purple);margin:0 0 48px;text-align:center;font-weight:900;}
    .summary-item{display:flex;justify-content:space-between;padding:20px 0;font-size:1.1rem;border-bottom:1px solid rgba(58,15,90,0.08);}
    .summary-item:last-child{border-bottom:none;padding:32px 0 0;}
    .summary-label{font-weight:700;color:var(--slate);}
    .summary-value{font-family:'Clash Display',serif;font-size:1.4rem;font-weight:900;color:var(--purple);}
    .summary-total{background:linear-gradient(135deg,rgba(58,15,90,0.02),rgba(58,15,90,0.01));padding:32px;border-radius:20px;margin-top:24px;border:2px solid rgba(58,15,90,0.1);}
    .total-label{font-family:'Clash Display',serif;font-size:1.3rem;font-weight:700;color:var(--slate);margin-bottom:12px;}
    .total-amount{font-family:'Clash Display',serif;font-size:3.6rem;font-weight:900;background:linear-gradient(135deg,var(--purple),var(--purple-dark));-webkit-background-clip:text;-webkit-text-fill-color:transparent;line-height:1;}

    /* Pay Button */
    .pay-button{width:100%;padding:36px;border:none;border-radius:32px;background:linear-gradient(135deg,var(--purple),var(--purple-dark));color:#fff;font-family:'Clash Display',serif;font-size:1.6rem;font-weight:900;cursor:pointer;box-shadow:0 28px 90px rgba(58,15,90,0.45);transition:all var(--ease);height:100px;margin-top:32px;}
    .pay-button:hover{transform:translateY(-8px);box-shadow:0 40px 120px rgba(58,15,90,0.55);}
    .pay-button:disabled{opacity:0.6;cursor:not-allowed;transform:none;}

    footer{padding:100px 5% 60px;text-align:center;color:var(--muted);border-top:1px solid rgba(183,185,189,0.12);font-size:0.95rem;}
    #toast{position:fixed;top:32px;right:32px;background:linear-gradient(135deg,var(--purple),var(--purple-dark));color:#fff;padding:24px 36px;border-radius:24px;box-shadow:0 28px 90px rgba(58,15,90,0.45);transform:translateX(500px);transition:all var(--ease);font-weight:700;z-index:500;max-width:420px;}
    #toast.show{transform:translateX(0);}

    @keyframes pulse{0%,100%{opacity:1;}50%{opacity:0.7;}}
  </style>
</head>
<body>
  <!-- Perfect System Header -->
  <header>
    <div class="brand" onclick="location.href='index.html'">
      <img src="images/logo.final.png" class="logo" alt="Snehvastra"/>
      <div>
        <div style="font-family:'Clash Display',serif;font-size:1.2rem;color:var(--purple);">Snehvastra</div>
        <div style="font-size:0.85rem;color:var(--muted);">Secure Checkout</div>
      </div>
    </div>
    <nav>
      <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="collection.html">Collection</a></li>
        <li><a href="checkout.html" class="active">Checkout</a></li>
        <li id="authArea"></li>
      </ul>
    </nav>
  </header>

  <div class="auction-banner">
    ðŸ”¥ SNEHVASTRA ONE AUCTION <span class="auction-timer" id="auctionTimer">Loading...</span>
  </div>

  <section class="hero" data-aos="fade-up">
    <h1 class="hero-title">Secure Checkout</h1>
    <p class="hero-subtitle">Suratgarh 2-day delivery â€¢ NFC verified â€¢ Razorpay/COD/UPI secure</p>
    <div class="security-badges">
      <div class="badge">ðŸ”’ SSL Secure</div>
      <div class="badge">ðŸ“± NFC Verified</div>
      <div class="badge">ðŸšš 2-Day Delivery</div>
      <div class="badge">ðŸ’° COD Available</div>
    </div>
  </section>

  <div class="checkout-grid">
    <!-- Shipping & Payment -->
    <section class="shipping-form" data-aos="fade-right">
      <h2 class="form-title">Shipping Details</h2>
      
      <div class="form-grid">
        <div class="form-group">
          <label class="form-label">Full Name *</label>
          <input class="form-input" id="fullName" required>
        </div>
        <div class="form-group">
          <label class="form-label">WhatsApp/Phone *</label>
          <input class="form-input" id="phone" type="tel" required>
        </div>
      </div>

      <div class="form-grid">
        <div class="form-group">
          <label class="form-label">Pincode *</label>
          <input class="form-input" id="pincode" maxlength="6" required>
        </div>
        <div class="form-group">
          <label class="form-label">City *</label>
          <input class="form-input" id="city" required>
        </div>
      </div>

      <div class="form-group">
        <label class="form-label">Complete Address *</label>
        <textarea class="form-textarea" id="address" placeholder="House no, street, area, landmark, etc." required></textarea>
      </div>

      <div id="deliveryInfo" class="pincode-info" style="display:none;">
        <span class="delivery-eta" id="deliveryEta"></span>
        <span id="pincodeStatus"></span>
      </div>

      <div class="payment-section">
        <h3 class="payment-title">Payment Method</h3>
        <div class="payment-options">
          <label class="payment-option active" data-method="razorpay">
            <div class="payment-radio checked"></div>
            <div class="payment-icon">ðŸ’³</div>
            <h4 class="payment-title">Razorpay Secure</h4>
            <p class="payment-desc">Cards â€¢ UPI â€¢ Wallets â€¢ Netbanking â€¢ Instant</p>
          </label>
          <label class="payment-option" data-method="cod">
            <div class="payment-radio"></div>
            <div class="payment-icon">ðŸ’°</div>
            <h4 class="payment-title">Cash on Delivery</h4>
            <p class="payment-desc">Pay at door â€¢ Phone verification â€¢ Suratgarh direct</p>
          </label>
          <label class="payment-option" data-method="upi">
            <div class="payment-radio"></div>
            <div class="payment-icon">ðŸ“±</div>
            <h4 class="payment-title">UPI Instant</h4>
            <p class="payment-desc">PhonePe â€¢ GPay â€¢ Paytm â€¢ BHIM â€¢ 2s payment</p>
          </label>
        </div>
      </div>

      <button class="pay-button" id="payNow" disabled>ðŸ”’ Complete Secure Order</button>
    </section>

    <!-- Order Summary -->
    <aside class="order-summary" data-aos="fade-left">
      <h2 class="summary-title">Order Summary</h2>
      <div id="cartItems"></div>
      <div class="summary-item">
        <span class="summary-label">Subtotal</span>
        <span class="summary-value" id="subtotal">â‚¹0</span>
      </div>
      <div class="summary-item">
        <span class="summary-label">Suratgarh Shipping</span>
        <span class="summary-value" id="shipping">â‚¹0</span>
      </div>
      <div class="summary-item">
        <span class="summary-label">GST (18%)</span>
        <span class="summary-value" id="tax">â‚¹0</span>
      </div>
      <div class="summary-total">
        <div class="total-label">Grand Total</div>
        <div class="total-amount" id="grandTotal">â‚¹0</div>
      </div>
    </aside>
  </div>

  <footer>
    Â© <span id="year"></span> Snehvastra. Razorpay secure â€¢ Suratgarh direct â€¢ NFC tracked.
  </footer>

  <div id="toast"></div>

  <script>
    // Perfect system sync
    const USER_KEY = "snehvastra_user"; const CART_KEY = "snehvastra_cart";
    let cart = JSON.parse(localStorage.getItem(CART_KEY) || "{}");
    const user = JSON.parse(localStorage.getItem(USER_KEY));

    const PRODUCT_DB = {
      "signature-tee-black": {name:"Signature Tee Matte Black",price:4999,nfc:true},
      "cloud-hoodie-indigo": {name:"Cloud Hoodie Indigo",price:19999,nfc:true},
      "snehvastra-one": {name:"Snehvastra ONE 1/1",price:125000,nfc:true,auction:true}
    };

    function renderAuth(){
      const authArea = document.getElementById("authArea");
      if(user && user.loggedIn){
        authArea.innerHTML = `<span style="color:var(--purple);font-weight:700;">Hi, ${user.name}</span>`;
      }
    }

    function updateCartCount(){
      const total = Object.values(cart).reduce((sum,qty)=>sum + (qty||0),0);
      document.getElementById("cartCount").textContent = total || 0;
    }

    function money(n){return "â‚¹" + Math.round(Number(n)).toLocaleString("en-IN");}

    function showToast(msg){
      const toast = document.getElementById("toast");
      toast.textContent = msg;
      toast.classList.add("show");
      setTimeout(()=>toast.classList.remove("show"), 3200);
    }

    function renderSummary(){
      const itemsEl = document.getElementById("cartItems");
      itemsEl.innerHTML = "";
      
      let subtotal = 0;
      Object.entries(cart).forEach(([id,qty]) => {
        if(qty > 0 && PRODUCT_DB[id]){
          const product = PRODUCT_DB[id];
          const lineTotal = product.price * qty;
          subtotal += lineTotal;
          
          const item = document.createElement("div");
          item.className = "summary-item";
          item.innerHTML = `
            <span>${product.name} Ã— ${qty}</span>
            <span class="summary-value">${money(lineTotal)}</span>
          `;
          itemsEl.appendChild(item);
        }
      });

      const shipping = subtotal >= 50000 ? 0 : 199;
      const tax = Math.round(subtotal * 0.18);
      const grandTotal = subtotal + shipping + tax;

      document.getElementById("subtotal").textContent = money(subtotal);
      document.getElementById("shipping").textContent = shipping ? money(shipping) : "FREE";
      document.getElementById("tax").textContent = money(tax);
      document.getElementById("grandTotal").textContent = money(grandTotal);

      return {subtotal, shipping, tax, grandTotal};
    }

    // Pincode validation
    document.getElementById('pincode').addEventListener('input', (e) => {
      const pincode = e.target.value;
      const infoEl = document.getElementById('deliveryInfo');
      
      if(pincode.length === 6){
        // Simulate pincode check
        const eta = Math.random() > 0.3 ? '2 days' : '3-4 days';
        document.getElementById('deliveryEta').textContent = eta;
        document.getElementById('pincodeStatus').textContent = 'âœ… Suratgarh delivery available';
        infoEl.style.display = 'block';
        gsap.fromTo(infoEl, {opacity:0, scale:0.95}, {opacity:1, scale:1, duration:0.4});
      } else {
        infoEl.style.display = 'none';
      }
    });

    // Payment selection
    document.querySelectorAll('.payment-option').forEach(option => {
      option.addEventListener('click', () => {
        document.querySelectorAll('.payment-option').forEach(opt => {
          opt.classList.remove('active');
          opt.querySelector('.payment-radio').classList.remove('checked');
        });
        option.classList.add('active');
        option.querySelector('.payment-radio').classList.add('checked');
      });
    });

    // Form validation & payment
    document.getElementById('payNow').addEventListener('click', () => {
      const totals = renderSummary();
      const required = ['fullName', 'phone', 'pincode', 'city', 'address'];
      
      for(let field of required){
        if(!document.getElementById(field).value.trim()){
          showToast(`Please fill ${field.replace(/([A-Z])/g, ' $1').toLowerCase()}`);
          return;
        }
      }

      const activePayment = document.querySelector('.payment-option.active');
      const method = activePayment.dataset.method;

      if(method === 'razorpay'){
        const options = {
          key: "rzp_test_your_key_here", // Replace with live key
          amount: totals.grandTotal * 100,
          currency: "INR",
          name: "Snehvastra",
          description: "NFC Verified Luxury Streetwear",
          handler: function(response){
            showToast("âœ… Payment successful! Order #"+Date.now()+" confirmed.");
            localStorage.removeItem(CART_KEY);
            setTimeout(() => location.href = "thank-you.html", 1500);
          }
        };
        const rzp = new Razorpay(options);
        rzp.open();
      } else {
        // COD/UPI - WhatsApp confirmation
        const phone = document.getElementById('phone').value;
        const name = document.getElementById('fullName').value;
        const message = encodeURIComponent(`ðŸ›’ Snehvastra COD Order\nName: ${name}\nTotal: ${money(totals.grandTotal)}\nPincode: ${document.getElementById('pincode').value}\n\nConfirm order?`);
        window.open(`https://wa.me/917597152209?text=${message}`);
        showToast("âœ… COD confirmed! WhatsApp verification sent.");
      }
    });

    // Auction timer
    const auctionDate = new Date("2025-12-24T18:00:00").getTime();
    setInterval(()=>{
      const diff = auctionDate - Date.now();
      const timer = document.getElementById("auctionTimer");
      if(diff > 0){
        const days = Math.floor(diff / (1000*60*60*24));
        const hours = Math.floor((diff % (1000*60*60*24)) / (1000*60*60));
        timer.textContent = `${days}d ${hours}h`;
      } else {
        timer.textContent = "LIVE NOW!";
      }
    }, 60000);

    // Init
    AOS.init({duration: 1200, once: true});
    renderAuth();
    updateCartCount();
    renderSummary();
    document.getElementById("year").textContent = new Date().getFullYear();
  </script>
</body>
</html>
