<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
  <meta name="theme-color" content="#3A0F5A" />
  <title>Contact Us ‚Äî Snehvastra V2</title>
  <meta name="description" content="Contact Snehvastra ‚Äî instant support, custom orders, auctions, and studio visits. Ask Sneh (AI) for quick help." />
  <meta name="keywords" content="Snehvastra, contact, support, custom order, auction, studio visit" />
  <link rel="canonical" href="https://www.snehvastra.store/contact.html" />

  <!-- Open Graph -->
  <meta property="og:site_name" content="Snehvastra" />
  <meta property="og:title" content="Contact ‚Äî Snehvastra" />
  <meta property="og:description" content="Instant support and bespoke service from Snehvastra ‚Äî ask Sneh for quick answers." />
  <meta property="og:image" content="images/og-image.jpg" />
  <meta property="og:type" content="website" />

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Clash+Display:wght@500;600;700&family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet" />

  <style>
    :root{
      --plum:#3A0F5A;
      --plum-2:#2E0B4A;
      --slate:#1F2024;
      --muted:#8E8F92;
      --silver:#BFC4C7;
      --paper:#F5F4F6;
      --glass: rgba(255,255,255,0.6);
      --radius:14px;
      --card-radius:16px;
      --focus: rgba(186,178,255,0.22);
      --max-w:1100px;
      --ease:0.28s;
      --specular: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02));
      --drop-shadow: 0 24px 80px rgba(58,15,90,0.06);
      --glass-dark: rgba(10,8,12,0.45);
      --trans-plain: rgba(255,255,255,0.92);
      --positive: #25D366;
      --danger: #FF6B6B;
      --radius-pill:999px;
    }
    /* Reset */
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:"Poppins",sans-serif;
      background: linear-gradient(180deg,var(--paper),#f0eff2);
      color:var(--slate);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      line-height:1.6;
    }

    /* Layout container */
    .site-wrap{max-width:var(--max-w);margin:0 auto;padding:20px;min-height:100vh;display:flex;flex-direction:column;gap:28px}

    /* Header */
    header{
      position:sticky;top:0;z-index:140;
      background: rgba(250,249,251,0.92);
      backdrop-filter: blur(8px) saturate(120%);
      border-bottom: 1px solid rgba(47,18,66,0.04);
    }
    .topbar{max-width:var(--max-w);margin:0 auto;display:flex;align-items:center;justify-content:space-between;padding:14px 20px;gap:12px}
    .brand{display:flex;gap:14px;align-items:center}
    .logo{height:52px;width:auto;border-radius:10px;filter:drop-shadow(0 8px 22px rgba(58,15,90,0.12))}
    nav ul{display:flex;gap:12px;align-items:center;list-style:none;margin:0;padding:0}
    nav a{color:var(--plum);text-decoration:none;font-weight:600;padding:8px 12px;border-radius:8px;transition:all var(--ease)}
    nav a:hover, nav a.active{background:var(--specular);box-shadow:0 8px 30px rgba(58,15,90,0.06);color:var(--slate)}
    #cartCount{background:var(--silver);color:var(--slate);padding:4px 8px;border-radius:999px;font-weight:700;font-size:.85rem}

    /* Hero */
    .hero{
      margin-top:6px;
      background: linear-gradient(180deg, rgba(58,15,90,0.03), rgba(255,255,255,0.9));
      padding:52px 36px;border-radius:18px;border:1px solid rgba(58,15,90,0.04);
      box-shadow:var(--drop-shadow);
      display:flex;gap:28px;align-items:center;justify-content:space-between;flex-wrap:wrap;
    }
    .hero-left{max-width:720px}
    .eyebrow{font-size:0.85rem;color:var(--muted);letter-spacing:1.6px;text-transform:uppercase;font-weight:700}
    .hero h1{font-family:'Clash Display',serif;color:var(--slate);font-size:clamp(1.6rem,3.2vw,2.6rem);margin:6px 0}
    .hero p.lead{color:var(--muted);font-size:1.05rem;max-width:60ch;margin-bottom:18px}
    .hero-actions{display:flex;gap:12px;flex-wrap:wrap}
    .btn{padding:12px 16px;border-radius:12px;border:1px solid rgba(255,255,255,0.06);background:var(--specular);cursor:pointer;font-weight:700;color:var(--slate);box-shadow:0 6px 22px rgba(58,15,90,0.04)}
    .btn.primary{background:linear-gradient(135deg,var(--plum),var(--plum-2));color:#fff;box-shadow:0 14px 48px rgba(58,15,90,0.18)}
    .btn.ghost{background:transparent;border:2px solid var(--plum);color:var(--plum)}
    .hero-right{min-width:240px;display:flex;flex-direction:column;gap:12px;align-items:flex-end}

    /* Inline AI entry */
    .ai-inline{
      width:100%;max-width:680px;margin-top:8px;
      display:flex;align-items:center;gap:10px;padding:12px;border-radius:12px;background:linear-gradient(180deg,#fff,#fbfbfc);
      border:1px solid rgba(47,18,66,0.04);box-shadow:0 10px 36px rgba(58,15,90,0.04);
    }
    .ai-inline input{flex:1;padding:12px 14px;border-radius:10px;border:1px solid rgba(47,18,66,0.06);font-size:0.98rem}
    .ai-inline button{padding:10px 14px;border-radius:10px;border:none;background:linear-gradient(135deg,var(--plum),var(--plum-2));color:#fff;font-weight:700;cursor:pointer}

    /* Contact grid */
    .contact-grid{display:grid;grid-template-columns:1fr 1fr;gap:22px}
    .contact-card{
      background: linear-gradient(180deg,#fff,#fbfbfc);padding:26px;border-radius:16px;border:1px solid rgba(47,18,66,0.04);
      box-shadow:0 18px 60px rgba(58,15,90,0.04);transition:transform var(--ease),box-shadow var(--ease);
    }
    .contact-card:hover{transform:translateY(-6px);box-shadow:0 28px 90px rgba(58,15,90,0.08)}
    .contact-icon{font-size:2.2rem;margin-bottom:14px}
    .contact-card h3{font-family:'Clash Display',serif;margin:0 0 6px;color:var(--slate)}
    .contact-card p{color:var(--muted);margin:0 0 12px}
    .contact-phone{font-weight:800;color:var(--plum);font-size:1.05rem}

    /* Form area */
    .contact-form{grid-column:1 / -1;background:linear-gradient(180deg,#fff,#fbfbfc);padding:28px;border-radius:16px;border:1px solid rgba(47,18,66,0.04);box-shadow:var(--drop-shadow)}
    .contact-form h2{font-family:'Clash Display',serif;margin:0 0 12px;color:var(--slate)}
    .form-grid{display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-bottom:16px}
    label{display:block;font-size:.95rem;color:var(--slate);font-weight:600;margin-bottom:8px}
    input[type=text],input[type=email],input[type=tel],textarea,select{
      width:100%;padding:12px;border-radius:10px;border:1px solid rgba(47,18,66,0.06);background:#fff;font-size:1rem;transition:box-shadow var(--ease),border-color var(--ease)
    }
    textarea{min-height:140px;resize:vertical}
    .submit-row{display:flex;gap:12px;align-items:center;flex-wrap:wrap;margin-top:8px}
    .hint{font-size:0.95rem;color:var(--muted)}

    /* Map + studio */
    .studio{display:grid;grid-template-columns:1fr 360px;gap:20px;margin-top:6px}
    .studio-map{width:100%;height:360px;border-radius:12px;border:1px solid rgba(47,18,66,0.04);overflow:hidden;box-shadow:0 12px 36px rgba(58,15,90,0.06)}
    .studio-info{background:linear-gradient(180deg,#fff,#fbfbfc);padding:18px;border-radius:12px;border:1px solid rgba(47,18,66,0.04);box-shadow:0 12px 36px rgba(58,15,90,0.04)}
    .studio-info h4{margin:0 0 8px;color:var(--plum);font-family:'Clash Display',serif}
    .studio-info p{color:var(--muted);margin:0 0 8px}

    /* Floating AI orb */
    .ai-orb{
      position:fixed;right:22px;bottom:22px;width:64px;height:64px;border-radius:999px;background:linear-gradient(135deg,var(--plum),var(--plum-2));
      box-shadow:0 20px 60px rgba(58,15,90,0.35);display:flex;align-items:center;justify-content:center;cursor:pointer;color:white;font-weight:800;font-size:1.15rem;z-index:320;border:1px solid rgba(255,255,255,0.06)
    }
    .ai-orb:focus{outline:3px solid var(--focus)}

    /* Modal */
    .modal-backdrop{position:fixed;inset:0;background:rgba(12,12,14,0.6);display:none;align-items:center;justify-content:center;padding:20px;z-index:400}
    .modal{background:#fff;border-radius:14px;padding:20px;max-width:720px;width:100%;box-shadow:0 30px 120px rgba(18,20,24,0.5);border:1px solid rgba(47,18,66,0.06)}
    .chat-window{display:flex;flex-direction:column;gap:12px;max-height:60vh;overflow:hidden}
    .chat-body{overflow:auto;padding:12px;border-radius:10px;border:1px solid rgba(47,18,66,0.04);background:linear-gradient(180deg,#fbfbfc,#fff);height:320px}
    .msg{padding:8px 12px;border-radius:12px;max-width:78%;margin-bottom:8px}
    .msg.user{background:linear-gradient(180deg,#eef2ff,#dde6ff);align-self:flex-end;color:var(--slate)}
    .msg.sneh{background:linear-gradient(180deg,#f5f4f9,#f0ecff);border:1px solid rgba(58,15,90,0.06);align-self:flex-start;color:var(--slate)}
    .chat-controls{display:flex;gap:8px;align-items:center}
    .chat-controls input{flex:1;padding:12px;border-radius:10px;border:1px solid rgba(47,18,66,0.06)}
    .chat-controls button{padding:10px 14px;border-radius:10px;border:none;background:linear-gradient(135deg,var(--plum),var(--plum-2));color:#fff;font-weight:700}

    /* Toast */
    .toast{position:fixed;top:18px;right:18px;background:linear-gradient(135deg,var(--plum),#2a0a3f);padding:14px 18px;border-radius:12px;color:white;font-weight:700;box-shadow:0 12px 48px rgba(58,15,90,0.3);display:none;z-index:420}

    /* WhatsApp float */
    .wa-float{position:fixed;bottom:96px;right:22px;background:linear-gradient(135deg,#25D366,#128C7E);color:white;width:56px;height:56px;border-radius:999px;display:flex;align-items:center;justify-content:center;text-decoration:none;z-index:320;box-shadow:0 12px 36px rgba(37,211,102,0.2)}

    /* Responsive tweaks */
    @media (max-width:980px){
      .contact-grid{grid-template-columns:1fr}
      .studio{grid-template-columns:1fr}
      .hero{padding:28px}
      .hero-right{align-items:flex-start;width:100%}
    }
    @media (max-width:520px){
      .form-grid{grid-template-columns:1fr}
      nav ul{display:none}
    }

    /* Focus for accessibility */
    a:focus, button:focus, input:focus, textarea:focus { outline: 3px solid var(--focus); outline-offset: 3px; border-radius:10px; }
  </style>
</head>
<body>
  <div class="site-wrap" id="siteWrap">

    <!-- Header -->
    <header>
      <div class="topbar" role="navigation" aria-label="Primary">
        <div class="brand" role="banner">
          <img src="images/logo.final.png" alt="Snehvastra" class="logo" />
          <div style="display:flex;flex-direction:column">
            <div style="font-weight:700;color:var(--plum)">Snehvastra</div>
            <div style="font-size:12px;color:var(--muted)">New Gen Luxury Streetwear</div>
          </div>
        </div>

        <nav aria-label="Main navigation">
          <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="collection.html">Collection</a></li>
            <li><a href="auction.html">Auction</a></li>
            <li><a href="contact.html" class="active" aria-current="page">Contact</a></li>
            <li><a href="cart.html">Cart (<span id="cartCount">0</span>)</a></li>
          </ul>
        </nav>
      </div>
    </header>

    <!-- Hero -->
    <section class="hero" aria-labelledby="contactHero">
      <div class="hero-left">
        <div class="eyebrow">Get help ‚Äî Ask Sneh</div>
        <h1 id="contactHero">Contact Snehvastra ‚Äî support, custom orders & auctions</h1>
        <p class="lead">Need quick support or bespoke help? Use Sneh (our assistant) for instant answers, message us on WhatsApp, or send a detailed request below. We reply within 24 hours (faster on WhatsApp).</p>

        <!-- Inline AI entry (Hybrid) -->
        <div class="ai-inline" role="region" aria-label="Quick ask Sneh">
          <input id="quickAsk" type="text" placeholder="Ask: 'Where is my order?', 'How to return?', 'Custom order prices?'" aria-label="Ask Snehvastra quick question" />
          <button id="quickAskBtn" aria-label="Ask Sneh">Ask Sneh</button>
        </div>

        <div class="hero-actions" style="margin-top:14px">
          <a class="btn primary" id="messageWhatsApp" href="https://wa.me/917597152209" target="_blank" rel="noopener">üí¨ Message on WhatsApp</a>
          <a class="btn ghost" href="mailto:hellosnehvastraa@gmail.com">‚úâÔ∏è Email Support</a>
        </div>
      </div>

      <div class="hero-right" aria-hidden="false">
        <div style="text-align:right">
          <div style="font-weight:700;color:var(--plum);margin-bottom:6px">Studio Hours</div>
          <div class="hint">Mon‚ÄìSat ‚Ä¢ 10am‚Äì6pm IST</div>
        </div>
        <div style="height:18px"></div>
        <div style="text-align:right">
          <div style="font-weight:700;color:var(--plum);margin-bottom:6px">Instant Phone</div>
          <div class="hint">+91 75971 52209</div>
        </div>
      </div>
    </section>

    <!-- Contact grid -->
    <section class="contact-grid" aria-label="Contact options">
      <div class="contact-card whatsapp-card" role="article" tabindex="0" aria-labelledby="whTitle">
        <div class="contact-icon">üí¨</div>
        <h3 id="whTitle">WhatsApp Support</h3>
        <p>Fastest responses for orders and urgent requests. Send images, sizing photos, or order numbers.</p>
        <div class="contact-phone">+91 75971 52209</div>
        <div style="margin-top:12px">
          <a id="waNow" class="contact-btn" href="https://wa.me/917597152209?text=Hi%20Snehvastra!%20I%20need%20help%20with..." target="_blank" rel="noopener">Message Now</a>
        </div>
      </div>

      <div class="contact-card" role="article" tabindex="0" aria-labelledby="callTitle">
        <div class="contact-icon">üìû</div>
        <h3 id="callTitle">Call & Voice</h3>
        <p>Prefer to speak? Call between 10AM‚Äì6PM. For complex custom orders we schedule a call.</p>
        <div class="contact-phone">+91 75971 52209</div>
        <div style="margin-top:12px">
          <a class="contact-btn" href="tel:+917597152209">Call Now</a>
        </div>
      </div>

      <div class="contact-card" role="article" tabindex="0" aria-labelledby="emailTitle">
        <div class="contact-icon">‚úâÔ∏è</div>
        <h3 id="emailTitle">Email</h3>
        <p>For invoices, press, and long-form requests (customs, bulk), email us. We reply within 24 hours.</p>
        <div class="contact-phone">hellosnehvastraa@gmail.com</div>
        <div style="margin-top:12px">
          <a class="contact-btn" href="mailto:hellosnehvastraa@gmail.com">Send Email</a>
        </div>
      </div>

      <div class="contact-card" role="article" tabindex="0" aria-labelledby="studioTitle">
        <div class="contact-icon">üèõÔ∏è</div>
        <h3 id="studioTitle">Studio Visits</h3>
        <p>Studio in Kota, Rajasthan. Visits by appointment only ‚Äî book in advance for sampling and fittings.</p>
        <div style="margin-top:12px">
          <a class="contact-btn" href="#studioSection">Book Visit</a>
        </div>
      </div>

      <!-- Form spans full width -->
      <div class="contact-form" role="form" aria-labelledby="formTitle">
        <h2 id="formTitle">Send a Message ‚Äî we'll respond within 24 hours</h2>
        <form id="contactForm" novalidate>
          <div class="form-grid">
            <div>
              <label for="name">Full name *</label>
              <input id="name" type="text" required placeholder="Your full name" />
            </div>
            <div>
              <label for="email">Email *</label>
              <input id="email" type="email" required placeholder="you@domain.com" />
            </div>

            <div>
              <label for="phone">Phone / WhatsApp</label>
              <input id="phone" type="tel" placeholder="7597152209" />
            </div>
            <div>
              <label for="subject">Subject *</label>
              <select id="subject" required>
                <option value="">Choose subject</option>
                <option value="order">Order Issue</option>
                <option value="auction">Auction Question</option>
                <option value="custom">Custom Order</option>
                <option value="return">Return / Exchange</option>
                <option value="other">Other</option>
              </select>
            </div>
          </div>

          <div style="margin-bottom:12px">
            <label for="message">Message *</label>
            <textarea id="message" required placeholder="Tell us about your request. Include order number if available."></textarea>
          </div>

          <div style="display:flex;gap:12px;align-items:center;flex-wrap:wrap">
            <button type="submit" class="btn primary" id="sendBtn">‚ú® Send Message</button>
            <button type="button" class="btn" id="saveDraft">Save Draft</button>
            <div class="hint" id="formHint">Prefer WhatsApp for fastest replies.</div>
          </div>
        </form>
      </div>
    </section>

    <!-- Studio + Map -->
    <section id="studioSection" class="studio" aria-labelledby="studioHeading">
      <div class="studio-map" aria-hidden="false">
        <iframe title="Snehvastra Studio ‚Äî Jaipur" style="width:100%;height:100%;border:0" loading="lazy"
          src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d22774.876625999998!2d75.857725!3d26.912434!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x396db47d7d9e8c9d%3A0x75e1e4f6c4e2e4f6!2sJaipur%2C%20Rajasthan!5e0!3m2!1sen!2sin!4v1732900000000">
        </iframe>
      </div>

      <aside class="studio-info" aria-labelledby="studioHeadingText">
        <h4 id="studioHeadingText">Studio ‚Äî By Appointment</h4>
        <p>Visit our studio in Kota / Jaipur region for bespoke fittings and sample viewing. Visits available Mon‚ÄìSat. Please schedule in advance.</p>
        <p><strong>Address:</strong> Kota / Jaipur (exact address provided after booking)</p>
        <p><strong>Booking</strong>: Message on WhatsApp (preferred) or use the form above.</p>
        <div style="margin-top:12px">
          <a id="bookWhatsApp" class="btn ghost" href="https://wa.me/917597152209?text=I%20would%20like%20to%20book%20a%20studio%20visit" target="_blank">Book via WhatsApp</a>
        </div>
      </aside>
    </section>

    <footer style="margin-top:18px;padding:18px;text-align:center;color:var(--muted);border-top:1px solid rgba(47,18,66,0.03)">
      ¬© <span id="currentYear"></span> Snehvastra. All Rights Reserved. ‚Ä¢ WhatsApp: <strong>75971 52209</strong>
    </footer>
  </div>

  <!-- Floating WhatsApp & AI orb -->
  <a class="wa-float" href="https://wa.me/917597152209?text=Hi%20Snehvastra!%20I%20need%20help." target="_blank" aria-label="WhatsApp">
    üí¨
  </a>

  <button id="aiOrb" class="ai-orb" aria-label="Open Sneh ‚Äî Instant Support">S</button>

  <!-- AI Modal (Sneh) -->
  <div id="modalBackdrop" class="modal-backdrop" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="modal" role="document" aria-labelledby="snehTitle">
      <h3 id="snehTitle" style="margin:0 0 6px;font-family:'Clash Display',serif;color:var(--plum)">Sneh ‚Äî Instant Support</h3>
      <p style="margin:0 0 10px;color:var(--muted)">Ask about orders, returns, sizing, auctions, or request a quote. Sneh can also prepare a WhatsApp order summary for you.</p>

      <div class="chat-window" aria-live="polite">
        <div id="chatBody" class="chat-body" role="log" aria-live="polite" aria-atomic="false"></div>

        <div class="chat-controls" role="group" aria-label="Chat controls">
          <input id="chatInput" type="text" placeholder="Type: 'Where is my order #1234', 'How to return', or 'Summarize my cart'"/>
          <button id="chatSend">Send</button>
          <button id="chatPlay" title="Read conversation aloud" aria-label="Read aloud">‚ñ∂</button>
        </div>

        <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:8px">
          <button id="closeModal" class="btn">Close</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Toast -->
  <div id="toast" class="toast" role="status" aria-live="polite"></div>

  <script>
    /*******************************
     * Global utilities & cart sync
     *******************************/
    const CART_KEY = 'snehvastra_cart';
    let cart = JSON.parse(localStorage.getItem(CART_KEY) || '{}');

    function updateCartCount(){
      const el = document.getElementById('cartCount');
      if(!el) return;
      const total = Object.values(cart).reduce((s,n)=>s+n,0);
      el.textContent = total;
    }

    function saveCart(){
      localStorage.setItem(CART_KEY, JSON.stringify(cart));
      updateCartCount();
    }

    // Toast helper
    const toastEl = document.getElementById('toast');
    let toastTimer = null;
    function showToast(msg, ms=3000){
      toastEl.textContent = msg;
      toastEl.style.display = 'block';
      clearTimeout(toastTimer);
      toastTimer = setTimeout(()=> toastEl.style.display = 'none', ms);
    }

    window.addEventListener('load', () => {
      updateCartCount();
      document.getElementById('currentYear').textContent = new Date().getFullYear();
    });

    /*******************************
     * Inline AI quick ask
     *******************************/
    const quickAskInput = document.getElementById('quickAsk');
    const quickAskBtn = document.getElementById('quickAskBtn');

    quickAskBtn.addEventListener('click', ()=> {
      const q = quickAskInput.value.trim();
      if(!q){ showToast('Try: "Where is my order?", "Return policy", or "Custom pricing".'); quickAskInput.focus(); return; }
      const ans = generateSnehResponse(q);
      // show ephemeral reply near input
      showToast('Sneh: ' + ans, 4500);
      quickAskInput.value = '';
    });

    quickAskInput.addEventListener('keypress', (e)=>{ if(e.key === 'Enter') quickAskBtn.click(); });

    /*******************************
     * AI Modal (Sneh) chat logic
     *******************************/
    const aiOrb = document.getElementById('aiOrb');
    const modalBackdrop = document.getElementById('modalBackdrop');
    const chatBody = document.getElementById('chatBody');
    const chatInput = document.getElementById('chatInput');
    const chatSend = document.getElementById('chatSend');
    const chatPlay = document.getElementById('chatPlay');
    const closeModal = document.getElementById('closeModal');

    function openModal(){
      modalBackdrop.style.display = 'flex';
      modalBackdrop.setAttribute('aria-hidden','false');
      chatInput.focus();
      // seed greeting
      pushSneh("Hi, I'm Sneh ‚Äî your instant assistant. Ask about orders, returns, custom work or say 'summarize my cart'.");
    }
    function closeModalFn(){
      modalBackdrop.style.display = 'none';
      modalBackdrop.setAttribute('aria-hidden','true');
    }
    aiOrb.addEventListener('click', openModal);
    aiOrb.addEventListener('keydown', (e)=> { if(e.key === 'Enter' || e.key === ' ') openModal(); });

    closeModal.addEventListener('click', closeModalFn);
    modalBackdrop.addEventListener('click', (e)=> { if(e.target === modalBackdrop) closeModalFn(); });

    chatSend.addEventListener('click', ()=> {
      const q = chatInput.value.trim();
      if(!q) return;
      pushUser(q);
      chatInput.value = '';
      // simulate thinking
      setTimeout(()=> {
        const answer = generateSnehResponse(q);
        pushSneh(answer);
      }, 350);
    });

    chatInput.addEventListener('keypress', (e)=> { if(e.key === 'Enter') chatSend.click(); });

    // Read aloud
    let synthUtter = null;
    chatPlay.addEventListener('click', ()=> {
      const text = Array.from(chatBody.querySelectorAll('.msg')).map(n => n.textContent).join(' ‚Äî ');
      if(!('speechSynthesis' in window)){ showToast('Voice not available in this browser'); return; }
      if(synthUtter){ speechSynthesis.cancel(); synthUtter = null; return; } // toggle
      synthUtter = new SpeechSynthesisUtterance(text);
      synthUtter.rate = 0.98; synthUtter.pitch = 0.94;
      speechSynthesis.speak(synthUtter);
      synthUtter.onend = ()=> { synthUtter = null; };
    });

    // Helpers to add messages to chat
    function pushUser(text){
      const el = document.createElement('div');
      el.className = 'msg user';
      el.textContent = text;
      chatBody.appendChild(el);
      chatBody.scrollTop = chatBody.scrollHeight;
    }
    function pushSneh(text){
      const el = document.createElement('div');
      el.className = 'msg sneh';
      el.textContent = text;
      chatBody.appendChild(el);
      chatBody.scrollTop = chatBody.scrollHeight;
    }

    /*******************************
     * Rule-based AI (replaceable with API)
     *******************************/
    function generateSnehResponse(query){
      const q = (query||'').toLowerCase();
      // Quick known intents:
      if(q.includes('where') && q.includes('order')){
        return "Check your order status: please share your order number (e.g. #1234) ‚Äî or visit Orders > Order History. If shipped, tracking link will be sent on WhatsApp.";
      }
      if(q.includes('return') || q.includes('refund') || q.includes('exchange')){
        return "Return policy: 7 days from delivery for eligible items. Keep tags intact. For returns, request via the Returns page or message us your order number here and we'll guide you.";
      }
      if(q.includes('size') || q.includes('fit') || q.includes('sizing')){
        return "Sizing: Snehvastra runs true-to-size. If between sizes choose the larger for relaxed fit. Ask for measurement chart or try 'size guide' to get exact numbers.";
      }
      if(q.includes('auction') || q.includes('bid')){
        return "Auctions: Snehvastra ONE has timed auctions with NFC authentication. Visit Auction page for active lots. Ask 'how to bid' for a quick guide.";
      }
      if(q.includes('custom') || q.includes('bespoke') || q.includes('made to')){
        return "Custom orders: Tell us the idea, preferred fabrics, and budget. We'll reply with timeline and sample pricing. For serious commissions, we'll schedule a consult.";
      }
      if(q.includes('summary') && q.includes('cart')){
        // generate a friendly cart summary
        const summary = summarizeCart();
        return summary ? summary : "Your cart is empty. Browse our Collection to add items.";
      }
      if(q.includes('whatsapp') || q.includes('contact')){
        return "WhatsApp is fastest ‚Äî message +91 75971 52209 with your order details. We reply 10AM‚Äì6PM IST.";
      }
      if(q.includes('hello') || q.includes('hi')){
        return "Hello ‚Äî I'm Sneh. How can I help today? (Try: 'Where is my order', 'Size guide', 'Summarize my cart')";
      }
      // fallback: offer contact routes
      return "Great question. I can help with order lookup, returns, sizing, auctions, or prepare a WhatsApp order summary. Try: 'Summarize my cart' or ask for your order number.";
    }

    function summarizeCart(){
      const prodCatalog = {
        "1": {name:"Streetwear Fusion Tee", price:499},
        "2": {name:"Luxury Midnight Jacket", price:2999},
        "3": {name:"Casual Cloud Hoodie", price:1999},
        "4": {name:"Tech Overshirt", price:4999},
        "one": {name:"Snehvastra ONE (Auction)"},
      };
      const entries = Object.entries(cart);
      if(entries.length === 0) return null;
      let lines = [];
      let subtotal = 0;
      entries.forEach(([id,qty])=>{
        const p = prodCatalog[id] || {name:'Item', price:0};
        const itemTotal = (p.price||0)*qty;
        subtotal += itemTotal;
        lines.push(`${p.name} √ó ${qty} ‚Äî ‚Çπ${(p.price||0).toLocaleString()}`);
      });
      const message = `Your cart:\n${lines.join('\n')}\nSubtotal: ‚Çπ${subtotal.toLocaleString()}. To check out via WhatsApp, click the green button.`;
      return message;
    }

    /*******************************
     * Contact form handling
     *******************************/
    const contactForm = document.getElementById('contactForm');
    const sendBtn = document.getElementById('sendBtn');
    const saveDraft = document.getElementById('saveDraft');

    contactForm.addEventListener('submit', (e) => {
      e.preventDefault();
      const name = document.getElementById('name').value.trim();
      const email = document.getElementById('email').value.trim();
      const subject = document.getElementById('subject').value;
      const message = document.getElementById('message').value.trim();
      if(!name || !email || !subject || !message){
        showToast('Please fill the required fields (name, email, subject, message).');
        return;
      }

      sendBtn.disabled = true;
      sendBtn.textContent = 'Sending...';

      // Build a light payload for WhatsApp preview (plus pretend API)
      const payload = {
        name, email,
        phone: document.getElementById('phone').value.trim(),
        subject, message,
        cartSummary: summarizeCart() || 'No cart items'
      };

      // Simulate API call, then show success
      setTimeout(() => {
        showToast('‚úÖ Message sent! We will reply within 24 hours. For urgent matters use WhatsApp.');
        contactForm.reset();
        sendBtn.disabled = false;
        sendBtn.textContent = '‚ú® Send Message';
        // optional: open WhatsApp with prefilled confirmation (commented)
        // window.open(`https://wa.me/917597152209?text=${encodeURIComponent("New contact: " + JSON.stringify(payload))}`, '_blank');
      }, 1100);
    });

    // Save draft locally
    saveDraft.addEventListener('click', () => {
      const draft = {
        name: document.getElementById('name').value,
        email: document.getElementById('email').value,
        phone: document.getElementById('phone').value,
        subject: document.getElementById('subject').value,
        message: document.getElementById('message').value,
      };
      localStorage.setItem('sneh_contact_draft', JSON.stringify(draft));
      showToast('Draft saved locally.');
    });

    // Load draft if present
    window.addEventListener('load', ()=> {
      try {
        const draft = JSON.parse(localStorage.getItem('sneh_contact_draft') || 'null');
        if(draft){
          document.getElementById('name').value = draft.name || '';
          document.getElementById('email').value = draft.email || '';
          document.getElementById('phone').value = draft.phone || '';
          document.getElementById('subject').value = draft.subject || '';
          document.getElementById('message').value = draft.message || '';
          showToast('Loaded saved draft.');
        }
      } catch(err){}
      updateCartCount();
    });

    /*******************************
     * Small usability additions
     *******************************/
    // Clicking 'Book Visit' scrolls to studio
    document.querySelectorAll('a[href="#studioSection"]').forEach(a => {
      a.addEventListener('click', (e)=> {
        e.preventDefault();
        document.getElementById('studioSection').scrollIntoView({behavior:'smooth', block:'center'});
      });
    });

    // Prevent accidental navigation away for unsent forms (only when form has content)
    window.addEventListener('beforeunload', (e) => {
      const hasContent = !!(document.getElementById('name').value || document.getElementById('email').value || document.getElementById('message').value);
      if(hasContent){
        e.preventDefault();
        e.returnValue = '';
      }
    });

    /*******************************
     * Accessibility: ESC to close modal, focus trap rudimentary
     *******************************/
    document.addEventListener('keydown', (e) => {
      if(e.key === 'Escape'){
        if(modalBackdrop.style.display === 'flex') closeModalFn();
        if(synthUtter){ speechSynthesis.cancel(); synthUtter = null; }
      }
    });

    // Minimal focus trap inside modal
    modalBackdrop.addEventListener('keydown', (e) => {
      if(e.key !== 'Tab') return;
      const focusable = modalBackdrop.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');
      if(!focusable.length) return;
      const first = focusable[0], last = focusable[focusable.length - 1];
      if(e.shiftKey && document.activeElement === first){ last.focus(); e.preventDefault(); }
      else if(!e.shiftKey && document.activeElement === last){ first.focus(); e.preventDefault(); }
    });

    /*******************************
     * Small analytics / heartbeat (no external calls here)
     *******************************/
    // Lightweight event: user opened contact form ‚Üí helpful for later analytics
    document.getElementById('quickAsk').addEventListener('focus', ()=> {
      // placeholder for event tracker
      // console.log('quickAsk focused');
    });
  </script>
</body>
</html>
