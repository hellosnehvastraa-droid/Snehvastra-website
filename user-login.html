<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <meta name="theme-color" content="#3A0F5A"/>
  <title>Secure Login ‚Äî Snehvastra</title>
  <meta name="description" content="Access exclusive drops, auctions, and AI styling. NFC-secured login for collectors."/>

  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Clash+Display:wght@500;600;700&family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet"/>
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet"/>
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

  <style>
    :root{
      --purple:#3A0F5A; --purple-dark:#2e0b4a; --slate:#1F2024; --slate-mid:#3B3D45;
      --muted:#8E8F92; --success:#10B981; --error:#EF4444; --glass:rgba(255,255,255,0.95);
      --radius:24px; --shadow-soft:0 35px 100px rgba(58,15,90,0.12); --ease:0.4s cubic-bezier(0.25,0.46,0.45,0.94);
      --max-width:500px;
    }
    *{box-sizing:border-box;}
    body{margin:0;font-family:'Poppins',sans-serif;background:linear-gradient(135deg,#f8f7fc 0%,#f4f2f9 100%);color:var(--slate);min-height:100vh;overflow-x:hidden;position:relative;}

    /* System Header (exact match with register.html) */
    header{position:sticky;top:0;z-index:140;background:rgba(255,255,255,0.98);backdrop-filter:blur(24px);border-bottom:1px solid rgba(58,15,90,0.1);padding:20px 5%;display:flex;align-items:center;justify-content:space-between;}
    .brand{display:flex;gap:14px;align-items:center;cursor:pointer;}
    .logo{height:48px;border-radius:14px;box-shadow:0 12px 40px rgba(58,15,90,0.15);}
    nav ul{display:flex;gap:14px;list-style:none;margin:0;padding:0;}
    nav a{padding:12px 20px;border-radius:16px;font-weight:600;color:var(--muted);text-decoration:none;transition:all var(--ease);}
    nav a.active{background:rgba(58,15,90,0.08);color:var(--purple);}

    /* Enhanced Auction Banner */
    .auction-banner{position:fixed;top:88px;left:50%;transform:translateX(-50%);width:92%;max-width:520px;background:linear-gradient(135deg,var(--purple),var(--purple-dark));color:#fff;padding:20px;border-radius:20px;text-align:center;font-weight:700;box-shadow:0 20px 60px rgba(58,15,90,0.4);z-index:100;}
    .auction-timer{background:rgba(255,255,255,0.95);backdrop-filter:blur(20px);padding:8px 16px;border-radius:16px;color:var(--slate);font-weight:700;font-size:1.1rem;margin-left:12px;display:inline-block;animation:pulse 2s infinite;}

    /* Premium Login Form */
    .form-container{max-width:var(--max-width);margin:200px auto 120px;padding:0 24px;}
    .page-title{font-family:'Clash Display',serif;font-size:clamp(2.8rem,8vw,4rem);background:linear-gradient(135deg,var(--purple),#5a1f7a);-webkit-background-clip:text;-webkit-text-fill-color:transparent;margin:0 0 20px;text-align:center;}
    .page-subtitle{color:var(--slate-mid);font-size:1.1rem;line-height:1.7;text-align:center;max-width:420px;margin:0 auto 60px;}

    .form-card{background:#fff;border-radius:32px;padding:64px 48px;box-shadow:var(--shadow-soft);border:1px solid rgba(58,15,90,0.08);position:relative;overflow:hidden;}
    .form-card::before{content:'';position:absolute;top:0;left:0;right:0;height:4px;background:linear-gradient(90deg,var(--purple),var(--purple-dark),var(--purple));}
    .form-card::after{content:'NFC Secure';position:absolute;top:20px;right:24px;background:linear-gradient(135deg,var(--purple),var(--purple-dark));color:#fff;padding:8px 16px;border-radius:20px;font-size:0.8rem;font-weight:700;opacity:0.9;}

    .form-group{position:relative;margin-bottom:36px;}
    .form-group label{display:block;margin-bottom:14px;font-weight:600;color:var(--slate);font-size:1rem;}
    .form-group input{width:100%;padding:22px 28px;border:2px solid rgba(58,15,90,0.12);border-radius:24px;font-size:1.05rem;font-family:'Poppins',sans-serif;background:rgba(255,255,255,0.97);backdrop-filter:blur(12px);transition:all var(--ease);color:var(--slate);}
    .form-group input:focus{outline:none;border-color:var(--purple);box-shadow:0 0 0 8px rgba(58,15,90,0.06),var(--shadow-soft);}
    .form-group input.valid{border-color:var(--success);}
    .form-group input.invalid{border-color:var(--error);}

    .password-container{position:relative;}
    .password-toggle{position:absolute;right:24px;top:50%;transform:translateY(-50%);background:none;border:none;font-size:1.4rem;cursor:pointer;color:var(--slate-mid);transition:all var(--ease);}
    .password-toggle:hover{color:var(--purple);}

    .status-message{position:absolute;right:0;bottom:20px;font-size:0.85rem;font-weight:600;padding:8px 16px;border-radius:16px;}
    .status-message.success{background:var(--success);color:#fff;}
    .status-message.error{background:var(--error);color:#fff;}
    .status-message.loading{background:var(--purple);color:#fff;}

    .remember-device{display:flex;align-items:center;gap:14px;margin:32px 0 48px;font-size:0.95rem;color:var(--slate-mid);}
    .remember-device input{width:auto;margin:0;flex-shrink:0;}
    .biometric-hint{color:var(--purple);font-weight:600;font-size:0.9rem;}

    .btn-primary{width:100%;padding:24px 36px;border:none;border-radius:28px;background:linear-gradient(135deg,var(--purple),var(--purple-dark));color:#fff;font-weight:700;font-size:1.15rem;cursor:pointer;box-shadow:0 20px 60px rgba(58,15,90,0.4);transition:all var(--ease);position:relative;overflow:hidden;}
    .btn-primary:hover{transform:translateY(-4px);box-shadow:0 28px 80px rgba(58,15,90,0.5);}
    .btn-primary:disabled{opacity:0.7;cursor:not-allowed;transform:none;}
    .btn-primary.loading::after{content:'';position:absolute;top:50%;left:50%;width:0;height:0;border-radius:50%;background:#fff;transform:translate(-50%,-50%);transition:all 0.6s ease;opacity:0;}
    .btn-primary.loading span{opacity:0;}

    /* Social Login */
    .social-auth{display:flex;gap:20px;margin:36px 0;}
    .social-btn{flex:1;padding:20px 28px;border-radius:24px;font-weight:700;border:none;cursor:pointer;transition:all var(--ease);display:flex;align-items:center;justify-content:center;gap:14px;font-size:1rem;}
    .google{background:#fff;border:2px solid rgba(58,15,90,0.15);color:var(--slate);box-shadow:0 12px 36px rgba(0,0,0,0.1);}
    .apple{background:#000;color:#fff;border:2px solid #000;}
    .social-btn:hover{transform:translateY(-3px);box-shadow:0 20px 50px rgba(0,0,0,0.2);}

    .form-divider{text-align:center;margin:40px 0;color:var(--slate-mid);font-size:0.9rem;position:relative;}
    .form-divider::before{content:'';position:absolute;top:50%;left:0;right:0;height:1px;background:rgba(183,185,189,0.3);z-index:1;}
    .form-divider span{background:#fff;padding:0 24px;position:relative;z-index:2;}

    .register-link{text-align:center;color:var(--slate-mid);font-size:0.98rem;}
    .register-link a{color:var(--purple);font-weight:700;text-decoration:none;}

    /* Toast */
    #toast{position:fixed;top:32px;right:32px;background:linear-gradient(135deg,var(--purple),var(--purple-dark));color:#fff;padding:24px 36px;border-radius:24px;box-shadow:0 28px 90px rgba(58,15,90,0.45);transform:translateX(500px);transition:all var(--ease);font-weight:700;z-index:500;max-width:400px;}
    #toast.show{transform:translateX(0);}
    #toast.error{background:linear-gradient(135deg,var(--error),#dc2626);}

    footer{padding:80px 5% 40px;text-align:center;color:var(--muted);border-top:1px solid rgba(183,185,189,0.12);font-size:0.9rem;}

    @keyframes pulse{0%,100%{opacity:1;}50%{opacity:0.7;}}
    @media(max-width:520px){.form-card{padding:48px 32px;}.social-auth{flex-direction:column;}}
  </style>
</head>
<body>
  <!-- System Header (perfect sync) -->
  <header>
    <div class="brand" onclick="location.href='index.html'">
      <img src="images/logo.final.png" class="logo" alt="Snehvastra"/>
      <div>
        <div style="font-family:'Clash Display',serif;font-size:1.1rem;color:var(--purple);">Snehvastra</div>
        <div style="font-size:0.8rem;color:var(--muted);">Collector Login</div>
      </div>
    </div>
    <nav>
      <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="collection.html">Collection</a></li>
        <li><a href="wishlist.html">Wishlist</a></li>
        <li><a href="cart.html">Cart (<span id="cartCount">0</span>)</a></li>
        <li id="authArea"></li>
      </ul>
    </nav>
  </header>

  <div class="auction-banner" data-aos="fade-down">
    üî• SNEHVASTRA ONE AUCTION <span class="auction-timer" id="auctionTimer">Loading...</span>
  </div>

  <div class="form-container">
    <h1 class="page-title" data-aos="fade-up">Welcome Back</h1>
    <p class="page-subtitle" data-aos="fade-up" data-aos-delay="100">
      Access your collection, live auctions, and AI styling recommendations.
    </p>

    <div class="form-card" data-aos="fade-up" data-aos-delay="200">
      <form id="login-form">
        <div class="form-group">
          <label for="email">Email Address</label>
          <input type="email" id="email" placeholder="your@email.com" required>
          <div class="status-message" id="emailStatus"></div>
        </div>

        <div class="form-group">
          <label for="password">Password (NFC Secure)</label>
          <div class="password-container">
            <input type="password" id="password" placeholder="Enter your password" required>
            <button type="button" class="password-toggle" id="togglePassword">üëÅ</button>
          </div>
          <div class="status-message" id="passwordStatus"></div>
        </div>

        <div class="remember-device">
          <input type="checkbox" id="remember" checked>
          <label for="remember">Remember this device <span class="biometric-hint">(Face ID ready)</span></label>
        </div>

        <button type="submit" class="btn-primary" id="loginBtn">
          <span>Secure Login</span>
        </button>
      </form>

      <div class="social-auth">
        <button class="social-btn google" onclick="googleSignIn()">
          <svg width="22" height="22" viewBox="0 0 24 24"><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/></svg>
          Google
        </button>
        <button class="social-btn apple" onclick="appleSignIn()">
          üçé Apple
        </button>
      </div>

      <div class="form-divider">or</div>
      <div class="register-link">
        New collector? <a href="user-register.html">Create Account</a>
      </div>
    </div>
  </div>

  <footer>
    ¬© <span id="year"></span> Snehvastra. Secure collector platform.
  </footer>

  <div id="toast"></div>

  <script>
    // System sync (exact match with register.html)
    const USER_KEY = "snehvastra_user"; const USERS_KEY = "snehvastra_users";
    let cart = JSON.parse(localStorage.getItem("snehvastra_cart") || "{}");

    // Auto-redirect if logged in
    const existingUser = JSON.parse(localStorage.getItem(USER_KEY));
    if(existingUser && existingUser.loggedIn) location.href = "index.html";

    // Enhanced live validation
    const emailInput = document.getElementById("email");
    const passwordInput = document.getElementById("password");
    const emailStatus = document.getElementById("emailStatus");

    // Live email validation
    emailInput.addEventListener("blur", () => {
      const email = emailInput.value.trim().toLowerCase();
      if(email && /\S+@\S+\.\S+/.test(email)){
        const users = JSON.parse(localStorage.getItem(USERS_KEY) || "[]");
        const found = users.find(u => u.email === email);
        if(found){
          emailStatus.textContent = "Collector found";
          emailStatus.className = "status-message success";
          emailInput.classList.add("valid");
        } else {
          emailStatus.textContent = "Email not found";
          emailStatus.className = "status-message error";
          emailInput.classList.add("invalid");
        }
      }
    });

    // Password toggle
    document.getElementById("togglePassword").onclick = () => {
      passwordInput.type = passwordInput.type === "password" ? "text" : "password";
      document.getElementById("togglePassword").textContent = passwordInput.type === "text" ? "üôà" : "üëÅ";
    };

    // Enhanced login with loading
    document.getElementById("login-form").addEventListener("submit", (e) => {
      e.preventDefault();
      const loginBtn = document.getElementById("loginBtn");
      const btnText = loginBtn.querySelector("span");
      
      loginBtn.classList.add("loading");
      loginBtn.disabled = true;
      btnText.textContent = "Signing In...";

      const email = emailInput.value.trim().toLowerCase();
      const password = passwordInput.value.trim();
      
      const users = JSON.parse(localStorage.getItem(USERS_KEY) || "[]");
      const found = users.find(u => u.email === email && u.password === password);

      setTimeout(() => {
        if(found){
          found.loggedIn = true;
          localStorage.setItem(USER_KEY, JSON.stringify(found));
          showToast("‚úÖ Welcome back! Loading collection...");
          setTimeout(() => location.href = "index.html", 1200);
        } else {
          showToast("Invalid email or password", "error");
          loginBtn.classList.remove("loading");
          loginBtn.disabled = false;
          btnText.textContent = "Secure Login";
        }
      }, 800);
    });

    // Social auth placeholders
    function googleSignIn(){ showToast("Google Sign-In coming soon"); }
    function appleSignIn(){ showToast("Apple Sign-In coming soon"); }

    // Enhanced auction timer
    const auctionDate = new Date("2025-12-24T18:00:00").getTime();
    setInterval(() => {
      const diff = auctionDate - Date.now();
      const timer = document.getElementById("auctionTimer");
      if(diff > 0){
        const days = Math.floor(diff / (1000 * 60 * 60 * 24));
        const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        timer.textContent = `${days}d ${hours}h`;
      } else {
        timer.textContent = "LIVE NOW!";
        timer.style.background = "linear-gradient(135deg, #10B981, #059669)";
        timer.style.color = "#fff";
      }
    }, 60000);

    // Cart sync
    function updateCartCount(){
      const total = Object.values(cart).reduce((a,b)=>a+(b||0),0);
      document.getElementById("cartCount").textContent = total;
    }

    function showToast(msg, type="success"){
      const toast = document.getElementById("toast");
      toast.textContent = msg;
      toast.className = `show ${type}`;
      setTimeout(()=>toast.classList.remove("show"), 3200);
    }

    // Init
    AOS.init({duration: 1000, once: true});
    updateCartCount();
    document.getElementById("year").textContent = new Date().getFullYear();
  </script>
</body>
</html>
