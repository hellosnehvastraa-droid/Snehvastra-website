<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Wishlist â€” Snehvastra Echo Drops</title>
  <meta name="theme-color" content="#3A0F5A"/>
  <meta name="description" content="Your curated streetwear collection. AI bundle suggestions. One-click checkout."/>

  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Clash+Display:wght@500;600;700&family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet"/>
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet"/>
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

  <style>
    :root{
      --purple:#3A0F5A; --purple-dark:#2e0b4a; --slate:#1F2024; --slate-mid:#3B3D45;
      --muted:#8E8F92; --glass:rgba(255,255,255,0.9); --radius:24px; --shadow-soft:0 30px 100px rgba(58,15,90,0.1);
      --ease:0.35s; --max-width:1400px;
    }
    *{box-sizing:border-box;}
    body{margin:0;font-family:'Poppins',sans-serif;background:linear-gradient(180deg,#faf9fc,#f5f3f8);color:var(--slate);overflow-x:hidden;}

    /* Enhanced Header (sync with index/collection) */
    header{position:sticky;top:0;z-index:140;background:rgba(255,255,255,0.97);backdrop-filter:blur(20px);border-bottom:1px solid rgba(58,15,90,0.08);padding:18px 5%;display:flex;align-items:center;justify-content:space-between;}
    .brand{display:flex;gap:14px;align-items:center;}
    .logo{height:50px;border-radius:14px;box-shadow:0 12px 40px rgba(58,15,90,0.15);}
    nav ul{display:flex;gap:14px;list-style:none;margin:0;padding:0;align-items:center;}
    nav a{padding:12px 20px;border-radius:16px;font-weight:600;color:var(--muted);text-decoration:none;transition:all var(--ease);}
    nav a.active,nav a:hover{background:rgba(58,15,90,0.08);color:var(--purple);}
    .user-box{display:flex;align-items:center;gap:12px;}
    .user-name{font-weight:700;color:var(--purple);font-size:0.95rem;}
    .logout-btn{background:linear-gradient(135deg,var(--purple),var(--purple-dark));color:#fff;border:none;border-radius:14px;padding:10px 20px;font-weight:700;cursor:pointer;box-shadow:0 8px 30px rgba(58,15,90,0.3);}

    /* Auction Banner */
    .auction-banner{background:linear-gradient(135deg,var(--purple),var(--purple-dark));color:#fff;padding:20px;text-align:center;font-weight:700;position:relative;overflow:hidden;}
    .auction-banner::before{content:'';position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,0.1),transparent);animation:shimmer 2s infinite;}

    /* Main Content */
    main{max-width:var(--max-width);margin:80px auto 100px;padding:0 5%;}
    .page-header{text-align:center;margin-bottom:60px;}
    .page-title{font-family:'Clash Display',serif;font-size:clamp(2.5rem,7vw,4.2rem);background:linear-gradient(135deg,var(--purple),#5a1f7a);-webkit-background-clip:text;-webkit-text-fill-color:transparent;margin:0 0 16px;}
    .wishlist-stats{display:flex;justify-content:center;gap:40px;font-size:1.1rem;font-weight:600;color:var(--slate-mid);}

    /* Wishlist Cards - Full Luxury Showcase */
    .wishlist-grid{display:grid;gap:40px;padding:0;margin:0;}
    .wishlist-item{position:relative;background:#fff;border-radius:32px;overflow:hidden;box-shadow:var(--shadow-soft);transition:all var(--ease);height:420px;}
    .wishlist-item:hover{transform:translateY(-16px);box-shadow:0 50px 140px rgba(58,15,90,0.25);}
    .item-media{position:relative;height:280px;overflow:hidden;}
    .item-media img{width:100%;height:100%;object-fit:cover;transition:all var(--ease);}
    .item-media video{display:none;position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;}
    .wishlist-item:hover .item-media video{display:block;}
    .wishlist-item:hover .item-media img{transform:scale(1.08);}
    
    .stock-badge{position:absolute;top:20px;left:20px;background:rgba(255,255,255,0.95);backdrop-filter:blur(20px);border-radius:20px;padding:8px 16px;font-weight:700;color:var(--purple);box-shadow:0 8px 32px rgba(0,0,0,0.15);}
    .nfc-badge{position:absolute;top:20px;right:20px;background:linear-gradient(135deg,#fff,#f8f7ff);border:2px solid var(--purple);border-radius:24px;padding:10px 16px;font-size:0.85rem;font-weight:700;box-shadow:0 12px 40px rgba(58,15,90,0.2);}
    
    .item-content{padding:32px;}
    .item-title{font-family:'Clash Display',serif;font-size:1.6rem;color:var(--purple);margin:0 0 12px;font-weight:600;}
    .item-price{font-size:1.4rem;font-weight:900;color:var(--purple);margin:0 0 20px;}
    .item-meta{display:flex;align-items:center;gap:12px;margin-bottom:24px;color:var(--muted);font-size:0.95rem;}
    .collector-count{background:rgba(58,15,90,0.08);color:var(--purple);padding:6px 14px;border-radius:20px;font-weight:600;}
    
    .item-actions{display:flex;gap:16px;align-items:center;flex-wrap:wrap;}
    .bundle-suggestion{display:flex;align-items:center;gap:12px;background:rgba(58,15,90,0.03);padding:14px 20px;border-radius:20px;border:1px solid rgba(58,15,90,0.1);cursor:pointer;transition:all var(--ease);flex:1;}
    .bundle-suggestion:hover{background:rgba(58,15,90,0.08);transform:translateX(4px);}
    .bundle-icon{font-size:1.2rem;}
    .add-bundle{background:linear-gradient(135deg,var(--purple),var(--purple-dark));color:#fff;border:none;border-radius:20px;padding:16px 32px;font-weight:700;font-size:1.1rem;cursor:pointer;box-shadow:0 12px 40px rgba(58,15,90,0.3);transition:all var(--ease);}
    .add-bundle:hover{transform:translateY(-4px);box-shadow:0 20px 60px rgba(58,15,90,0.4);}
    .remove-heart{position:absolute;top:24px;left:24px;width:52px;height:52px;background:rgba(255,255,255,0.95);backdrop-filter:blur(20px);border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all var(--ease);box-shadow:0 12px 40px rgba(0,0,0,0.15);}
    .heart-fill{display:none;width:28px;height:28px;background:var(--purple);clip-path:polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%);}
    .remove-heart:hover .heart-fill{display:block;}

    /* Sidebar */
    .sidebar{background:#fff;border-radius:28px;padding:36px;border:1px solid rgba(58,15,90,0.08);box-shadow:var(--shadow-soft);}
    .sidebar-title{font-family:'Clash Display',serif;font-size:1.4rem;color:var(--purple);margin:0 0 28px;font-weight:600;}
    .quick-action{background:linear-gradient(135deg,rgba(58,15,90,0.02),rgba(58,15,90,0.01));border:2px solid rgba(58,15,90,0.1);color:var(--purple);border-radius:20px;padding:18px 24px;width:100%;margin-bottom:16px;font-weight:700;cursor:pointer;transition:all var(--ease);}
    .quick-action:hover{transform:translateY(-2px);box-shadow:0 20px 60px rgba(58,15,90,0.15);background:linear-gradient(135deg,rgba(58,15,90,0.05),rgba(58,15,90,0.03));}

    /* Empty State */
    .empty-state{text-align:center;padding:120px 40px;color:var(--muted);}
    .empty-illustration{width:200px;height:200px;background:linear-gradient(135deg,rgba(58,15,90,0.03),rgba(58,15,90,0.01));border-radius:50%;margin:0 auto 32px;display:flex;align-items:center;justify-content:center;font-size:4rem;color:var(--muted);}

    /* Toast & Share */
    .toast{position:fixed;top:100px;right:24px;background:linear-gradient(135deg,var(--purple),var(--purple-dark));color:#fff;padding:20px 28px;border-radius:20px;box-shadow:0 20px 80px rgba(58,15,90,0.4);transform:translateX(400px);transition:all var(--ease);font-weight:700;z-index:500;}
    .toast.show{transform:translateX(0);}
    .share-link{position:fixed;bottom:30px;left:50%;transform:translateX(-50%);background:rgba(255,255,255,0.95);backdrop-filter:blur(20px);border-radius:50px;padding:16px 32px;border:2px solid rgba(58,15,90,0.2);font-weight:700;cursor:pointer;transition:all var(--ease);display:none;}
    .share-link:hover{box-shadow:0 20px 60px rgba(0,0,0,0.2);}

    @keyframes shimmer{0%{left:-100%}100%{left:100%}}
    @media(max-width:980px){.content{display:block;gap:32px;}.wishlist-item{height:auto;}}
  </style>
</head>
<body>
  <!-- Enhanced Header -->
  <header>
    <div class="brand">
      <img src="images/logo.final.png" class="logo" alt="Snehvastra"/>
      <div>
        <div style="font-family:'Clash Display',serif;font-size:1.1rem;color:var(--purple);">Snehvastra</div>
        <div style="font-size:0.8rem;color:var(--muted);">Your Collection</div>
      </div>
    </div>
    <nav>
      <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="collection.html">Collection</a></li>
        <li><a href="wishlist.html" class="active">Wishlist</a></li>
        <li><a href="auction.html">Auction</a></li>
        <li><a href="cart.html">Cart (<span id="cartCount">0</span>)</a></li>
        <li id="authArea"></li>
      </ul>
    </nav>
  </header>

  <div class="auction-banner" data-aos="fade-down">
    ðŸ”¥ SNEHVASTRA ONE AUCTION LIVE â€” 3 pieces remaining
  </div>

  <main>
    <div class="page-header">
      <h1 class="page-title" data-aos="fade-up">Your Wishlist</h1>
      <div class="wishlist-stats" data-aos="fade-up" data-aos-delay="200">
        <div><strong id="wishlistCount">0</strong> Items Curated</div>
        <div>â‚¹<span id="wishlistTotal">0</span> Total Value</div>
      </div>
    </div>

    <div class="content">
      <div id="wishlistArea" class="wishlist-grid"></div>
      
      <aside class="sidebar" data-aos="fade-left">
        <h3 class="sidebar-title">Quick Actions</h3>
        <button class="quick-action" id="moveAllToCart" data-aos="zoom-in">Move All to Cart</button>
        <button class="quick-action" id="shareWishlist" data-aos="zoom-in" data-aos-delay="100">Share Wishlist</button>
        <button class="quick-action" id="clearWishlist" data-aos="zoom-in" data-aos-delay="200">Clear All</button>
        <div style="margin-top:32px;padding-top:24px;border-top:1px solid rgba(58,15,90,0.1);color:var(--muted);font-size:0.9rem;">
          <strong>Sneh suggests:</strong> Complete looks sell out 3x faster
        </div>
      </aside>
    </div>

    <!-- Empty State -->
    <div id="emptyState" class="empty-state" style="display:none;" data-aos="fade-up">
      <div class="empty-illustration">ðŸ’Ž</div>
      <h2 style="font-family:'Clash Display',serif;color:var(--purple);font-size:2.2rem;margin:0 0 16px;">Your wishlist is empty</h2>
      <p>Browse <a href="collection.html" style="color:var(--purple);">Echo Drops</a> to start curating your collection.</p>
    </div>
  </main>

  <!-- Share & Toast -->
  <div class="share-link" id="shareLink">ðŸ“± Copy Wishlist Link</div>
  <div class="toast" id="toast"></div>

  <script>
    // Enhanced Products with full data
    const PRODUCTS = {
      "eclipse-hoodie": {title:"Eclipse Hoodie",price:12999,img:"images/products/eclipse-hoodie.jpg",video:"videos/eclipse.mp4",stock:3,tags:["hoodie","black"],complements:["neon-track","midnight-varsity"]},
      "neon-track": {title:"Neon Track Pants",price:8999,img:"images/products/track-pants.jpg",video:"videos/track.mp4",stock:7,tags:["pants","neon"],complements:["eclipse-hoodie"]},
      "midnight-varsity": {title:"Midnight Varsity",price:24999,img:"images/products/varsity.jpg",stock:2,tags:["jacket"],complements:["eclipse-hoodie"]}
    };

    const KEY_USER = 'snehvastra_user';
    const KEY_WISHLIST = 'snehvastra_wishlist';
    const KEY_CART = 'snehvastra_cart';

    let wishlist = [], cart = {};

    function getUser(){return JSON.parse(localStorage.getItem(KEY_USER)||'null');}
    function getWishlist(){const user=getUser();return user&&user.wishlist?user.wishlist:JSON.parse(localStorage.getItem(KEY_WISHLIST)||'[]');}
    function saveWishlist(items){
      wishlist = items;
      const user = getUser();
      if(user){
        user.wishlist = items;
        localStorage.setItem(KEY_USER, JSON.stringify(user));
      } else {
        localStorage.setItem(KEY_WISHLIST, JSON.stringify(items));
      }
      renderWishlist();
    }

    function renderWishlist(){
      const area = document.getElementById('wishlistArea');
      const countEl = document.getElementById('wishlistCount');
      const totalEl = document.getElementById('wishlistTotal');
      
      if(wishlist.length === 0){
        area.style.display = 'none';
        document.getElementById('emptyState').style.display = 'block';
        countEl.textContent = '0';
        totalEl.textContent = '0';
        return;
      }
      
      area.style.display = 'grid';
      document.getElementById('emptyState').style.display = 'none';
      
      let totalValue = 0;
      area.innerHTML = wishlist.map(id => {
        const p = PRODUCTS[id];
        if(!p) return '';
        totalValue += p.price;
        return `
          <article class="wishlist-item" data-aos="fade-up" data-aos-delay="${Math.random()*200}">
            <div class="remove-heart" data-id="${id}" title="Remove from wishlist">
              <div class="heart-fill"></div>
            </div>
            <div class="item-media">
              <img src="${p.img}" alt="${p.title}" loading="lazy"/>
              ${p.video ? `<video muted loop preload="none"><source src="${p.video}" type="video/mp4"/></video>` : ''}
              <div class="stock-badge">${p.stock} left</div>
              <div class="nfc-badge">NFC</div>
            </div>
            <div class="item-content">
              <h3 class="item-title">${p.title}</h3>
              <div class="item-price">â‚¹${p.price.toLocaleString()}</div>
              <div class="item-meta">
                <span class="collector-count">${p.collectors || '47'} collectors</span>
                <span>${p.tags.join(' â€¢ ')}</span>
              </div>
              <div class="item-actions">
                <div class="bundle-suggestion" data-id="${id}">
                  <span class="bundle-icon">ðŸŽ¯</span>
                  <span>Sneh suggests: ${p.complements?.[0] ? PRODUCTS[p.complements[0]]?.title.split(' ')[0] : 'Jacket'}</span>
                </div>
                <button class="add-bundle" data-id="${id}">Add to Cart</button>
              </div>
            </div>
          </article>`;
      }).join('');
      
      countEl.textContent = wishlist.length;
      totalEl.textContent = totalValue.toLocaleString();
      
      // Rebind events
      bindEvents();
    }

    function bindEvents(){
      // Remove hearts
      document.querySelectorAll('.remove-heart').forEach(heart => {
        heart.addEventListener('click', (e) => {
          const id = e.currentTarget.dataset.id;
          saveWishlist(wishlist.filter(x => x !== id));
          showToast('Removed from wishlist');
        });
      });
      
      // Add to cart
      document.querySelectorAll('.add-bundle').forEach(btn => {
        btn.addEventListener('click', (e) => {
          const id = e.currentTarget.dataset.id;
          cart[id] = (cart[id] || 0) + 1;
          localStorage.setItem(KEY_CART, JSON.stringify(cart));
          updateCartCount();
          showToast('Added to cart!');
          gsap.to(e.target, {scale: 0.95, duration: 0.1, yoyo: true, repeat: 1});
        });
      });
      
      // Bundle suggestions
      document.querySelectorAll('.bundle-suggestion').forEach(suggestion => {
        suggestion.addEventListener('click', (e) => {
          const id = e.currentTarget.dataset.id;
          const p = PRODUCTS[id];
          if(p.complements?.[0]){
            cart[p.complements[0]] = (cart[p.complements[0]] || 0) + 1;
            cart[id] = (cart[id] || 0) + 1;
            localStorage.setItem(KEY_CART, JSON.stringify(cart));
            updateCartCount();
            showToast(`Complete look added: ${p.title} + ${PRODUCTS[p.complements[0]].title}`);
          }
        });
      });
    }

    // Quick actions
    document.getElementById('moveAllToCart').onclick = () => {
      wishlist.forEach(id => {
        cart[id] = (cart[id] || 0) + 1;
      });
      localStorage.setItem(KEY_CART, JSON.stringify(cart));
      saveWishlist([]);
      updateCartCount();
      showToast('All items moved to cart!');
    };

    document.getElementById('clearWishlist').onclick = () => {
      saveWishlist([]);
      showToast('Wishlist cleared');
    };

    document.getElementById('shareWishlist').onclick = () => {
      const url = `${window.location.origin}/wishlist.html?share=${btoa(JSON.stringify(wishlist))}`;
      navigator.clipboard.writeText(url);
      document.getElementById('shareLink').style.display = 'block';
      setTimeout(() => document.getElementById('shareLink').style.display = 'none', 3000);
      showToast('Wishlist link copied!');
    };

    function updateCartCount(){
      const total = Object.values(cart).reduce((a,b)=>a+b,0);
      document.getElementById('cartCount').textContent = total;
    }

    function showToast(msg){
      const toast = document.getElementById('toast');
      toast.textContent = msg;
      toast.classList.add('show');
      setTimeout(()=>toast.classList.remove('show'), 2800);
    }

    // Auth
    const authArea = document.getElementById('authArea');
    const user = getUser();
    if(user){
      authArea.innerHTML = `<span class="user-name">Hi, ${user.name}</span><button class="logout-btn" onclick="logout()">Logout</button>`;
      document.getElementById('signedInName').textContent = user.name;
    } else {
      authArea.innerHTML = `<a href="user-login.html" style="color:var(--purple);font-weight:600;">Login</a>`;
    }

    function logout(){
      localStorage.removeItem(KEY_USER);
      location.reload();
    }

    // Init
    window.addEventListener('load', () => {
      cart = JSON.parse(localStorage.getItem(KEY_CART) || '{}');
      wishlist = getWishlist();
      document.getElementById('currentYear').textContent = new Date().getFullYear();
      AOS.init({duration: 1000, once: true});
      renderWishlist();
      updateCartCount();
    });
  </script>
</body>
</html>
